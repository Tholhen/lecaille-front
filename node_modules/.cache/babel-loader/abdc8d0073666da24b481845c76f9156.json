{"ast":null,"code":"import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{config}from\"../../config/config\";import{addToBasket}from\"../../utils/basket\";import{getOneProduct}from\"../../api/products\";//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";//Imports depuis la librairie MaterialUI\nimport TextField from'@material-ui/core/TextField';import{makeStyles}from\"@material-ui/styles\";import{Button}from'@material-ui/core';import InputAdornment from'@material-ui/core/InputAdornment';import AddShoppingCartIcon from'@material-ui/icons/AddShoppingCart';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import Snackbar from'@material-ui/core/Snackbar';import MuiAlert from'@material-ui/lab/Alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=function Product(props){var headerTitle=\"Boutique\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Boutique\",link:null}];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),quantity=_useState4[0],setQuantity=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),amount=_useState6[0],setAmount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),snackbarOpened=_useState8[0],setSnackbarOpened=_useState8[1];//Définition des styles MaterialUI\nvar useStyles=makeStyles(function(theme){return{qtyInput:{width:\"100%\"},addToBasket:{marginTop:theme.spacing(2),width:\"100%\"}};});var classes=useStyles();//Au chargement de la page\nuseEffect(function(){getOneProduct(props.match.params.id).then(function(productDB){setProduct(productDB);});},[props.match.params.id]);//Calcul du prix désiré en temps réel\nvar displayAmount=function displayAmount(e){if(e.target.value>0){if(e.target.value>10000){setQuantity(10000);setAmount((10000*product.price/1000).toFixed(2));}else{setQuantity(e.target.value);setAmount((e.target.value*product.price/1000).toFixed(2));}}else{setQuantity(\"\");setAmount(0);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"product-container\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"product-content\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"product-presentation\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"product-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:product.category}),/*#__PURE__*/_jsx(\"p\",{children:product.name})]}),/*#__PURE__*/_jsx(\"section\",{className:\"product-pict\",children:product.pict_url&&/*#__PURE__*/_jsx(\"img\",{src:config.product_pict_url+product.pict_url,alt:product.name})}),/*#__PURE__*/_jsxs(\"section\",{className:\"product-infos\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"product-price\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Prix : \",/*#__PURE__*/_jsxs(\"strong\",{children:[product.price,\" \\u20AC/Kg TTC\"]})]})}),/*#__PURE__*/_jsxs(\"section\",{className:\"product-add-to-basket\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"add-to-basket-quantity\",children:[/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"Quantit\\xE9 d\\xE9sir\\xE9e\",type:\"number\",InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"g\"})},className:classes.qtyInput,onChange:function onChange(e){displayAmount(e);},value:quantity}),parseFloat(amount)!==0&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Montant d\\xE9sir\\xE9 : \",amount,\" \\u20AC TTC\"]})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(Button,{variant:\"contained\",color:\"primary\",className:classes.addToBasket,onClick:function onClick(e){addToBasket(product,quantity);setSnackbarOpened(true);},children:[/*#__PURE__*/_jsx(AddShoppingCartIcon,{}),\"Ajouter au panier\"]}),/*#__PURE__*/_jsx(Snackbar,{open:snackbarOpened,autoHideDuration:6000,onClose:function onClose(e){setSnackbarOpened(false);},children:/*#__PURE__*/_jsx(MuiAlert,{onClose:function onClose(e){setSnackbarOpened(false);},severity:\"success\",children:\"Produit ajout\\xE9 au panier.\"})})]})]})]}),product.description&&/*#__PURE__*/_jsxs(\"section\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"back-to-shop\",children:/*#__PURE__*/_jsx(Link,{className:\"general-link\",to:\"/shop\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(ArrowBackIcon,{}),\" Retour \\xE0 la liste des produits\"]})})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default Product;","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/shop/product.js"],"names":["React","useState","useEffect","Link","config","addToBasket","getOneProduct","Header","HeaderPages","Footer","TextField","makeStyles","Button","InputAdornment","AddShoppingCartIcon","ArrowBackIcon","Snackbar","MuiAlert","Product","props","headerTitle","headerBreadcrumbs","value","link","product","setProduct","quantity","setQuantity","amount","setAmount","snackbarOpened","setSnackbarOpened","useStyles","theme","qtyInput","width","marginTop","spacing","classes","match","params","id","then","productDB","displayAmount","e","target","price","toFixed","category","name","pict_url","product_pict_url","endAdornment","parseFloat","description"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport {Link} from \"react-router-dom\"\n\nimport {config} from \"../../config/config\"\nimport {addToBasket} from \"../../utils/basket\"\nimport {getOneProduct} from \"../../api/products\"\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\n\n//Imports depuis la librairie MaterialUI\nimport TextField from '@material-ui/core/TextField'\nimport { makeStyles } from \"@material-ui/styles\"\nimport { Button } from '@material-ui/core'\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\n\nconst Product = (props) => {\n\n    const headerTitle = \"Boutique\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"}, {value: \"Boutique\", link:null}]\n\n    const [product, setProduct] = useState({})\n    const [quantity, setQuantity] = useState(\"\")\n    const [amount, setAmount] = useState(0)\n\n    const [snackbarOpened, setSnackbarOpened] = useState(false)\n\n    //Définition des styles MaterialUI\n    const useStyles = makeStyles((theme) => ({\n        qtyInput:{\n            width:\"100%\"\n        },\n        addToBasket:{\n            marginTop: theme.spacing(2),\n            width:\"100%\"\n        }\n        }));\n        \n    const classes = useStyles();\n\n    //Au chargement de la page\n    useEffect(() => {\n        getOneProduct(props.match.params.id)\n        .then(productDB => {\n            setProduct(productDB)\n        })\n    }, [props.match.params.id])\n\n    //Calcul du prix désiré en temps réel\n    const displayAmount = (e) => {\n        if(e.target.value > 0){\n            if(e.target.value > 10000){\n                setQuantity(10000)\n                setAmount((10000*product.price/1000).toFixed(2))\n            } else {\n                setQuantity(e.target.value)\n                setAmount((e.target.value*product.price/1000).toFixed(2))\n            }\n        } else {\n            setQuantity(\"\")\n            setAmount(0)  \n        }\n        \n    }\n\n    return(\n        <section className=\"root\">\n            <Header />\n            <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n            <section className=\"product-container\">\n                <section className=\"product-content\">\n                    <section className=\"product-presentation\">\n                        <section className=\"product-header\">\n                            <p>{product.category}</p>\n                            <p>{product.name}</p>\n                        </section>\n                        <section className=\"product-pict\">\n                            {product.pict_url && <img src={config.product_pict_url + product.pict_url} alt={product.name} />}\n                        </section>\n                        <section className=\"product-infos\">\n                            <section className=\"product-price\">\n                                <p>Prix : <strong>{product.price} €/Kg TTC</strong></p>\n                            </section>\n                            <section className=\"product-add-to-basket\">\n                                <section className=\"add-to-basket-quantity\">\n                                    <TextField variant=\"filled\" \n                                            label=\"Quantité désirée\"\n                                            type=\"number\"\n                                            InputProps={{\n                                                endAdornment: <InputAdornment position=\"start\">g</InputAdornment>,\n                                                \n                                            }} \n                                            className={classes.qtyInput}\n                                            onChange={(e) => {displayAmount(e)}}\n                                            value={quantity}/>\n                                    {parseFloat(amount) !== 0 && <p>Montant désiré : {amount} € TTC</p>}\n                                </section>\n                                \n                                <section>\n                                    <Button variant=\"contained\" color=\"primary\" className={classes.addToBasket} \n                                        onClick={(e) => {addToBasket(product, quantity)\n                                                         setSnackbarOpened(true)}}><AddShoppingCartIcon />\n                                        Ajouter au panier\n                                    </Button>\n                                    <Snackbar open={snackbarOpened} autoHideDuration={6000} onClose={(e) => {setSnackbarOpened(false)}}>\n                                        <MuiAlert onClose={(e) => {setSnackbarOpened(false)}} severity=\"success\">Produit ajouté au panier.</MuiAlert>\n                                    </Snackbar>\n                                </section>\n                            </section>\n                        </section>\n                        {product.description && <section className=\"product-description\">\n                            <p>Description</p>\n                            <p>{product.description}</p>\n                        </section>}\n                    </section>\n                </section>\n                <section className=\"back-to-shop\">\n                    <Link className=\"general-link\" to=\"/shop\"><p><ArrowBackIcon /> Retour à la liste des produits</p></Link>\n                </section>\n                \n                \n            </section>\n            <Footer />\n        </section>\n    )\n}\n\nexport default Product"]},"metadata":{},"sourceType":"module"}