{"ast":null,"code":"import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{saveUser}from\"../api/user\";//Imports de la librairie MaterialUI\nimport Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogTitle from'@material-ui/core/DialogTitle';import{Button}from'@material-ui/core';import TextField from'@material-ui/core/TextField';import FormHelperText from'@material-ui/core/FormHelperText';import FormControl from'@material-ui/core/FormControl';import{makeStyles}from\"@material-ui/styles\";import{config}from\"../config/config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterPopUp=function RegisterPopUp(props){//Définition des variables\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),firstNameError=_useState4[0],setFirstNameError=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),firstNameErrorText=_useState6[0],setFirstNameErrorText=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),lastNameError=_useState10[0],setLastNameError=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),lastNameErrorText=_useState12[0],setLastNameErrorText=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),email=_useState14[0],setEmail=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),emailError=_useState16[0],setEmailError=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),emailErrorText=_useState18[0],setEmailErrorText=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),password=_useState20[0],setPassword=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),passwordError=_useState22[0],setPasswordError=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),passwordErrorText=_useState24[0],setPasswordErrorText=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),phone=_useState26[0],setPhone=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),phoneError=_useState28[0],setPhoneError=_useState28[1];var _useState29=useState(\"\"),_useState30=_slicedToArray(_useState29,2),phoneErrorText=_useState30[0],setPhoneErrorText=_useState30[1];var _useState31=useState(\"\"),_useState32=_slicedToArray(_useState31,2),address=_useState32[0],setAddress=_useState32[1];var _useState33=useState(\"\"),_useState34=_slicedToArray(_useState33,2),zip=_useState34[0],setZip=_useState34[1];var _useState35=useState(\"\"),_useState36=_slicedToArray(_useState35,2),city=_useState36[0],setCity=_useState36[1];//Définition du style MaterialUI\nvar useStyles=makeStyles(function(theme){return{margin:{margin:theme.spacing(1),width:\"90%\"}};});var classes=useStyles();var globalVerify=function globalVerify(){if(!firstName){setFirstNameError(true);setFirstNameErrorText(\"Prénom non renseigné\");}else{setFirstNameError(false);setFirstNameErrorText(\"\");}if(!lastName){setLastNameError(true);setLastNameErrorText(\"Nom non renseigné\");}else{setLastNameError(false);setLastNameErrorText(\"\");}if(!email){setEmailError(true);setEmailErrorText(\"Adresse email non renseignée\");}else{if(!email.match(config.emailRegEx)){setEmailError(true);setEmailErrorText(\"Format d'email non valide\");}else{setEmailError(false);setEmailErrorText(\"\");}}if(!password){setPasswordError(true);setPasswordErrorText(\"Mot de passe non renseigné\");}else{setPasswordError(false);setPasswordErrorText(\"\");}if(!phone){setPhoneError(true);setPhoneErrorText(\"N° de téléphone non renseigné\");}else{if(!phone.match(config.phoneRegEx)){setPhoneError(true);setPhoneErrorText(\"N° de téléphone incorrect\");}else{setPhoneError(false);setPhoneErrorText(\"\");}}//Si tous les champs sont bons, on enregistre l'utilisateur\nif(firstName&&lastName&&email&&password&&phone&&phone.match(config.phoneRegEx)&&email.match(config.emailRegEx)){var datas={firstName:firstName,lastName:lastName,email:email,password:password,phone:phone,address:address,zip:zip,city:city};saveUser(datas).then(function(response){if(response.data.status===401){setEmailErrorText(\"Utilisateur existant\");setEmailError(true);}else{props.closeRegisterForm();}});}};var onSubmit=function onSubmit(){globalVerify();};return/*#__PURE__*/_jsxs(Dialog,{open:props.opened,onClose:function onClose(e){props.closeRegisterForm();},children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"S'enregistrer\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-register-form\",autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(FormControl,{error:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Nom\",variant:\"filled\",color:\"primary\",className:classes.margin,required:true,onChange:function onChange(e){setLastName(e.target.value);},error:lastNameError}),/*#__PURE__*/_jsx(FormHelperText,{children:lastNameErrorText})]}),/*#__PURE__*/_jsxs(FormControl,{error:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Pr\\xE9nom\",variant:\"filled\",color:\"primary\",className:classes.margin,required:true,onChange:function onChange(e){setFirstName(e.target.value);},error:firstNameError,value:firstName}),/*#__PURE__*/_jsx(FormHelperText,{children:firstNameErrorText})]}),/*#__PURE__*/_jsxs(FormControl,{error:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Email\",variant:\"filled\",color:\"primary\",className:classes.margin,required:true,onChange:function onChange(e){setEmail(e.target.value);},error:emailError,type:\"email\",value:email}),/*#__PURE__*/_jsx(FormHelperText,{children:emailErrorText})]}),/*#__PURE__*/_jsxs(FormControl,{error:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"Mot de passe\",color:\"primary\",variant:\"filled\",className:classes.margin,required:true,onChange:function onChange(e){setPassword(e.target.value);},error:passwordError,type:\"password\",value:password}),/*#__PURE__*/_jsx(FormHelperText,{children:passwordErrorText})]}),/*#__PURE__*/_jsxs(FormControl,{error:true,children:[/*#__PURE__*/_jsx(TextField,{label:\"T\\xE9l\\xE9phone\",variant:\"filled\",color:\"primary\",className:classes.margin,required:true,error:phoneError,type:\"tel\",onChange:function onChange(e){setPhone(e.target.value);}}),/*#__PURE__*/_jsx(FormHelperText,{children:phoneErrorText})]}),/*#__PURE__*/_jsx(FormControl,{error:true,children:/*#__PURE__*/_jsx(TextField,{label:\"Adresse\",variant:\"filled\",color:\"primary\",className:classes.margin,onChange:function onChange(e){setAddress(e.target.value);}})}),/*#__PURE__*/_jsx(FormControl,{error:true,children:/*#__PURE__*/_jsx(TextField,{label:\"Code Postal\",variant:\"filled\",color:\"primary\",className:classes.margin,onChange:function onChange(e){setZip(e.target.value);}})}),/*#__PURE__*/_jsx(FormControl,{error:true,children:/*#__PURE__*/_jsx(TextField,{label:\"Ville\",variant:\"filled\",color:\"primary\",className:classes.margin,onChange:function onChange(e){setCity(e.target.value);}})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){props.closeRegisterForm();},color:\"primary\",children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){onSubmit();},color:\"primary\",children:\"Envoyer\"})]})]});};export default RegisterPopUp;","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/components/registerPopUp.js"],"names":["React","useState","saveUser","Dialog","DialogActions","DialogContent","DialogTitle","Button","TextField","FormHelperText","FormControl","makeStyles","config","RegisterPopUp","props","firstName","setFirstName","firstNameError","setFirstNameError","firstNameErrorText","setFirstNameErrorText","lastName","setLastName","lastNameError","setLastNameError","lastNameErrorText","setLastNameErrorText","email","setEmail","emailError","setEmailError","emailErrorText","setEmailErrorText","password","setPassword","passwordError","setPasswordError","passwordErrorText","setPasswordErrorText","phone","setPhone","phoneError","setPhoneError","phoneErrorText","setPhoneErrorText","address","setAddress","zip","setZip","city","setCity","useStyles","theme","margin","spacing","width","classes","globalVerify","match","emailRegEx","phoneRegEx","datas","then","response","data","status","closeRegisterForm","onSubmit","opened","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport {saveUser} from \"../api/user\"\n\n//Imports de la librairie MaterialUI\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { Button } from '@material-ui/core';\nimport TextField from '@material-ui/core/TextField';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport {makeStyles } from \"@material-ui/styles\";\n\nimport {config} from \"../config/config\"\n\nconst RegisterPopUp = (props) => {\n\n    //Définition des variables\n    const [firstName, setFirstName] = useState(\"\")\n    const [firstNameError, setFirstNameError] = useState(false)\n    const [firstNameErrorText, setFirstNameErrorText] = useState(\"\")\n\n    const [lastName, setLastName] = useState(\"\")\n    const [lastNameError, setLastNameError] = useState(false)\n    const [lastNameErrorText, setLastNameErrorText] = useState(\"\")\n\n    const [email, setEmail] = useState(\"\")\n    const [emailError, setEmailError] = useState(false)\n    const [emailErrorText, setEmailErrorText] = useState(\"\")\n\n    const [password, setPassword] = useState(\"\")\n    const [passwordError, setPasswordError] = useState(false)\n    const [passwordErrorText, setPasswordErrorText] = useState(\"\")\n\n    const [phone, setPhone] = useState(\"\")\n    const [phoneError, setPhoneError] = useState(false)\n    const [phoneErrorText, setPhoneErrorText] = useState(\"\")\n\n    const [address, setAddress] = useState(\"\")\n    const [zip, setZip] = useState(\"\")\n    const [city, setCity] = useState(\"\")\n\n    //Définition du style MaterialUI\n    const useStyles = makeStyles((theme) => ({\n        margin: {\n            margin: theme.spacing(1),\n            width: \"90%\"\n        },\n    }));\n        \n    const classes = useStyles();\n\n    const globalVerify = () => {\n\n            if(!firstName){\n                setFirstNameError(true)\n                setFirstNameErrorText(\"Prénom non renseigné\")\n            }\n            else {\n                setFirstNameError(false)\n                setFirstNameErrorText(\"\")\n            }\n\n            if(!lastName){\n                setLastNameError(true)\n                setLastNameErrorText(\"Nom non renseigné\")\n            }\n            else {\n                setLastNameError(false)\n                setLastNameErrorText(\"\")\n            }\n            if(!email){\n                setEmailError(true)\n                setEmailErrorText(\"Adresse email non renseignée\")\n            }\n            else {\n                if(!email.match(config.emailRegEx)){\n                    setEmailError(true)\n                    setEmailErrorText(\"Format d'email non valide\")\n                }\n                else {\n                    setEmailError(false)\n                    setEmailErrorText(\"\")\n                }\n            }\n            if(!password){\n                setPasswordError(true)\n                setPasswordErrorText(\"Mot de passe non renseigné\")\n            }\n            else {\n                setPasswordError(false)\n                setPasswordErrorText(\"\")\n            }\n            if(!phone){\n                setPhoneError(true)\n                setPhoneErrorText(\"N° de téléphone non renseigné\")\n            }\n            else{\n                if(!phone.match(config.phoneRegEx)){\n                    setPhoneError(true)\n                    setPhoneErrorText(\"N° de téléphone incorrect\")\n                }\n                else {\n                    setPhoneError(false)\n                    setPhoneErrorText(\"\")\n                }\n            }\n\n            //Si tous les champs sont bons, on enregistre l'utilisateur\n            if(firstName && lastName && email && password && phone && phone.match(config.phoneRegEx) && email.match(config.emailRegEx)){\n                \n                let datas = {\n                    firstName: firstName,\n                    lastName: lastName,\n                    email: email,\n                    password: password,\n                    phone: phone,\n                    address: address,\n                    zip: zip,\n                    city: city\n                }    \n                \n                saveUser(datas)\n                .then(response => {\n                    if(response.data.status === 401){\n                        setEmailErrorText(\"Utilisateur existant\")\n                        setEmailError(true)\n                    }\n                    else{\n                        props.closeRegisterForm()\n                    }\n                })\n                \n            }\n            \n    }\n\n    const onSubmit = () =>{\n        globalVerify()\n       \n    }\n\n    return(\n        <Dialog\n            open={props.opened}\n            onClose={(e) => {props.closeRegisterForm()}}\n        >\n            <DialogTitle>S'enregistrer</DialogTitle>\n            <DialogContent>\n            <form className=\"login-register-form\" autoComplete=\"off\">\n                <FormControl error>\n                    <TextField label=\"Nom\" variant=\"filled\" color=\"primary\" className={classes.margin} required onChange={(e) => {setLastName(e.target.value)}} error={lastNameError} />\n                    <FormHelperText>{lastNameErrorText}</FormHelperText>\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Prénom\" variant=\"filled\" color=\"primary\" className={classes.margin} required onChange={(e) => {setFirstName(e.target.value)}} error={firstNameError} value={firstName}/>\n                    <FormHelperText>{firstNameErrorText}</FormHelperText>\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Email\" variant=\"filled\" color=\"primary\" className={classes.margin} required onChange={(e) => {setEmail(e.target.value)}} error={emailError} type=\"email\" value={email}/>\n                    <FormHelperText>{emailErrorText}</FormHelperText>\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Mot de passe\" color=\"primary\" variant=\"filled\" className={classes.margin} required onChange={(e) => {setPassword(e.target.value)}} error={passwordError} type=\"password\" value={password}/>\n                    <FormHelperText>{passwordErrorText}</FormHelperText>\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Téléphone\" variant=\"filled\" color=\"primary\" className={classes.margin} required  error={phoneError} type=\"tel\"  onChange={(e) => {setPhone(e.target.value)}} />\n                    <FormHelperText>{phoneErrorText}</FormHelperText>\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Adresse\" variant=\"filled\" color=\"primary\" className={classes.margin} onChange={(e) => {setAddress(e.target.value)}} />\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Code Postal\" variant=\"filled\" color=\"primary\" className={classes.margin} onChange={(e) => {setZip(e.target.value)}} />\n                </FormControl>\n\n                <FormControl error>\n                    <TextField label=\"Ville\" variant=\"filled\" color=\"primary\" className={classes.margin} onChange={(e) => {setCity(e.target.value)}} />\n                </FormControl>\n            </form>\n            </DialogContent>\n            <DialogActions>\n            <Button onClick={(e) => {props.closeRegisterForm()}} color=\"primary\">\n                Annuler\n            </Button>\n            <Button onClick={(e) => {onSubmit()}} color=\"primary\">\n                Envoyer\n            </Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default RegisterPopUp"]},"metadata":{},"sourceType":"module"}