{"ast":null,"code":"import _toConsumableArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,Redirect}from\"react-router-dom\";import{connect}from\"react-redux\";import{config}from\"../../config/config\";import{getBasket,deleteFromBasket,clearBasket}from\"../../utils/basket\";import{getOneProduct}from\"../../api/products\";import{saveRequest,saveRequestDetails}from\"../../api/requests\";//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";//Imports depuis la librairie MaterialUI\nimport{Button}from'@material-ui/core';import DeleteIcon from'@material-ui/icons/Delete';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Basket=function Basket(props){var headerTitle=\"Panier\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Boutique\",link:\"/shop\"},{value:\"Panier\",link:null}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),basket=_useState2[0],setBasket=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),displayedBasket=_useState4[0],setDisplayedBasket=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalAmount=_useState6[0],setTotalAmount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),redirectRequestSuccess=_useState8[0],setRedirectRequestSuccess=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),redirectRequestSuccessURL=_useState10[0],setRedirectRequestSuccessURL=_useState10[1];//Au chargement de la page\nuseEffect(function(){setBasket(getBasket());},[]);//A chaque modification de basket\nuseEffect(function(){setDisplayedBasket([]);var _loop=function _loop(i){getOneProduct(basket[i].productId).then(function(product){var productAmount=(basket[i].quantity*product.price/1000).toFixed(2);setTotalAmount(function(totalAmount){return totalAmount+parseFloat(productAmount);});setDisplayedBasket(function(displayedBasket){return[].concat(_toConsumableArray(displayedBasket),[/*#__PURE__*/_jsxs(\"article\",{className:\"basket-item-container\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"basket-item\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"basket-item-pict\",children:/*#__PURE__*/_jsx(\"img\",{src:config.product_pict_url+product.pict_url,alt:\"illustration\"+product.id})}),/*#__PURE__*/_jsxs(\"section\",{className:\"basket-item-infos\",children:[/*#__PURE__*/_jsx(Link,{className:\"general-link\",to:\"/shop/products/\"+product.id,children:/*#__PURE__*/_jsx(\"p\",{children:product.name})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"em\",{children:product.category})}),/*#__PURE__*/_jsxs(\"p\",{children:[product.price,\" \\u20AC/Kg TTC\"]})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"basket-item-resume\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantit\\xE9 d\\xE9sir\\xE9e : \",/*#__PURE__*/_jsxs(\"span\",{children:[basket[i].quantity,\" g\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Prix total (TTC) : \",/*#__PURE__*/_jsxs(\"span\",{children:[productAmount,\" \\u20AC \"]}),\" \"]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"basket-item-user-interactions\",children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){removeItemFromBasket(basket[i].productId);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]},i)]);});});};for(var i=0;i<basket.length;i++){_loop(i);}},[basket]);//Suppression du produit du panier\nvar removeItemFromBasket=function removeItemFromBasket(id){deleteFromBasket(id);setBasket(getBasket());};//Fonction d'affichage du panier\nvar showDisplayedBasket=function showDisplayedBasket(){return/*#__PURE__*/_jsx(\"section\",{className:\"basket-content\",children:displayedBasket});};//Enregistrement de la commande\nvar saveBasket=function saveBasket(){var datas={request_number:new Date().getTime(),id_user:props.user.infos.id};saveRequest(datas).then(function(response){var _loop2=function _loop2(i){getOneProduct(basket[i].productId).then(function(product){var detailsDatas={quantity:basket[i].quantity,price:product.price,id_product:basket[i].productId};saveRequestDetails(response.insertId,detailsDatas);});};for(var i=0;i<basket.length;i++){_loop2(i);}setRedirectRequestSuccessURL(\"/shop/request/success/\"+response.insertId);setRedirectRequestSuccess(true);clearBasket();});};return/*#__PURE__*/_jsxs(\"section\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"basket-container\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"basket-content-container\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"basket-header\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Mon panier\"}),/*#__PURE__*/_jsx(\"p\",{children:basket.length>0&&basket.length+\" produit(s)\"})]}),basket.length===0&&/*#__PURE__*/_jsxs(\"section\",{className:\"empty-basket\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Votre panier est vide\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:Link,to:\"/shop\",children:\"Commencer mes achats\"})]}),basket&&showDisplayedBasket()]}),/*#__PURE__*/_jsxs(\"aside\",{className:\"basket-resume default-background-gradient\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"basket-resume-header\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Total\"})}),/*#__PURE__*/_jsxs(\"section\",{className:\"basket-resume-content\",children:[/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Montant total (HT) : \"}),/*#__PURE__*/_jsxs(\"p\",{children:[(totalAmount*0.8).toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Montant TVA : \"}),/*#__PURE__*/_jsxs(\"p\",{children:[(totalAmount*0.2).toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Montant total (TTC) :\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[totalAmount.toFixed(2),\" \\u20AC\"]})})]})]}),basket.length>0&&/*#__PURE__*/_jsx(\"section\",{className:\"basket-resume-footer\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(e){saveBasket();},children:\"Commander\"})})]})]}),/*#__PURE__*/_jsx(Footer,{}),redirectRequestSuccess&&/*#__PURE__*/_jsx(Redirect,{to:redirectRequestSuccessURL})]});};var mapStateToProps=function mapStateToProps(store){return{user:store.user};};var mapDispatchToProps={};export default connect(mapStateToProps,mapDispatchToProps)(Basket);","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/shop/basket.js"],"names":["React","useState","useEffect","Link","Redirect","connect","config","getBasket","deleteFromBasket","clearBasket","getOneProduct","saveRequest","saveRequestDetails","Header","HeaderPages","Footer","Button","DeleteIcon","Basket","props","headerTitle","headerBreadcrumbs","value","link","basket","setBasket","displayedBasket","setDisplayedBasket","totalAmount","setTotalAmount","redirectRequestSuccess","setRedirectRequestSuccess","redirectRequestSuccessURL","setRedirectRequestSuccessURL","i","productId","then","product","productAmount","quantity","price","toFixed","parseFloat","product_pict_url","pict_url","id","name","category","e","removeItemFromBasket","length","showDisplayedBasket","saveBasket","datas","request_number","Date","getTime","id_user","user","infos","response","detailsDatas","id_product","insertId","mapStateToProps","store","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport {Link, Redirect} from \"react-router-dom\"\nimport {connect} from \"react-redux\"\nimport {config} from \"../../config/config\"\nimport {getBasket, deleteFromBasket, clearBasket} from \"../../utils/basket\"\nimport {getOneProduct} from \"../../api/products\"\nimport {saveRequest, saveRequestDetails} from \"../../api/requests\"\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\n\n//Imports depuis la librairie MaterialUI\nimport { Button } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\nconst Basket = (props) => {\n\n    const headerTitle = \"Panier\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"}, {value: \"Boutique\", link:\"/shop\"}, {value: \"Panier\", link:null}]\n\n    const [basket, setBasket] = useState([])\n    const [displayedBasket, setDisplayedBasket] = useState([])\n    const [totalAmount, setTotalAmount] = useState(0)\n    const [redirectRequestSuccess, setRedirectRequestSuccess] = useState(false)\n    const [redirectRequestSuccessURL, setRedirectRequestSuccessURL] = useState(\"\")\n\n    //Au chargement de la page\n    useEffect(() => {\n        setBasket(getBasket())\n    },[])\n\n    //A chaque modification de basket\n    useEffect(() => {\n        setDisplayedBasket([])\n        for(let i = 0; i < basket.length; i ++){\n            getOneProduct(basket[i].productId)\n            .then((product) => {\n                let productAmount = (basket[i].quantity * product.price/1000).toFixed(2)\n                \n                setTotalAmount(totalAmount => totalAmount + parseFloat(productAmount))\n                setDisplayedBasket(displayedBasket => [...displayedBasket,\n                    <article className=\"basket-item-container\" key={i}>\n                        <section className=\"basket-item\">\n                            <section className=\"basket-item-pict\">\n                                <img src={config.product_pict_url + product.pict_url} alt={\"illustration\"+product.id}/>\n                            </section>\n                            <section className=\"basket-item-infos\">\n                                <Link className=\"general-link\" to={\"/shop/products/\"+product.id}><p>{product.name}</p></Link>\n                                <p><em>{product.category}</em></p>\n                                <p>{product.price} €/Kg TTC</p>\n                                \n                            </section>\n                        </section>\n                        <section className=\"basket-item-resume\">\n                            <p>Quantité désirée : <span>{basket[i].quantity} g</span></p>\n                            <p>Prix total (TTC) : <span>{productAmount} € </span> </p>\n                        </section>\n                        <section className=\"basket-item-user-interactions\">\n                            <Button onClick={(e) => {removeItemFromBasket(basket[i].productId)}}><DeleteIcon /></Button>\n                        </section>\n                    </article>])\n            })\n            \n        }\n    }, [basket])\n\n    //Suppression du produit du panier\n    const removeItemFromBasket = (id) => {\n        deleteFromBasket(id)\n        setBasket(getBasket())\n    }\n\n    //Fonction d'affichage du panier\n    const showDisplayedBasket = () => {\n\n        return (<section className=\"basket-content\">\n            {displayedBasket}\n        </section>)\n    }\n\n    //Enregistrement de la commande\n    const saveBasket = () => {\n        let datas = {request_number: new Date().getTime(),\n                     id_user: props.user.infos.id}\n        saveRequest(datas)\n        .then(response => {\n            for(let i = 0; i < basket.length; i++){\n                getOneProduct(basket[i].productId)\n                .then((product) => {\n                    let detailsDatas = {quantity: basket[i].quantity,\n                                        price: product.price,\n                                        id_product: basket[i].productId}\n                    saveRequestDetails(response.insertId, detailsDatas)\n                })\n            }\n            setRedirectRequestSuccessURL(\"/shop/request/success/\"+response.insertId)\n            setRedirectRequestSuccess(true)\n            clearBasket()\n        })\n    }\n\n    return(\n        <section className=\"root\">\n\n            <Header />\n            <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n\n            <section className=\"basket-container\">\n                <section className=\"basket-content-container\">\n                    <section className=\"basket-header\">\n                        <p>Mon panier</p>\n                        <p>{basket.length > 0 && basket.length + \" produit(s)\"}</p>    \n                    </section>\n                    {basket.length === 0 && \n                            <section className=\"empty-basket\">\n                                <p>Votre panier est vide</p>\n                            <Button variant=\"contained\" color=\"primary\" component={Link} to =\"/shop\">Commencer mes achats</Button>\n                            </section>}\n\n                    {basket && showDisplayedBasket()}\n                </section>\n\n                <aside className=\"basket-resume default-background-gradient\">\n                    <section className=\"basket-resume-header\">\n                        <p>Total</p>\n                    </section>\n                    <section className=\"basket-resume-content\">\n                        <article>\n                            <p>Montant total (HT) : </p>\n                            <p>{(totalAmount*0.8).toFixed(2)} €</p>\n                        </article>\n                        <article>\n                            <p>Montant TVA : </p>\n                            <p>{(totalAmount*0.2).toFixed(2)} €</p>\n                        </article>\n                        <article>\n                            <p>Montant total (TTC) :</p>\n                            <p><span>{totalAmount.toFixed(2)} €</span></p>\n                        </article>\n                    </section>\n                    \n                    {basket.length > 0 && <section className=\"basket-resume-footer\">\n                        <Button variant=\"contained\" color=\"primary\" onClick={(e) => {saveBasket()}}>Commander</Button>\n                    </section>}\n                </aside>\n            </section>\n            <Footer/>\n\n            {redirectRequestSuccess && <Redirect to={redirectRequestSuccessURL} />}\n        </section>\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        user : store.user\n    }\n}\n\nconst mapDispatchToProps = {\n\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(Basket) "]},"metadata":{},"sourceType":"module"}