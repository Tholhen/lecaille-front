{"ast":null,"code":"import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import{config}from\"../../config/config\";import{getProducts}from\"../../api/products\";import{Link}from\"react-router-dom\";//Imports de la librairie MaterialUI\nimport{Button}from'@material-ui/core';//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";import AdminMenu from\"../../components/adminMenu\";//Import des images\nimport editIcon from\"../../assets/icons/edit-blue.svg\";import deleteIcon from\"../../assets/icons/delete-blue.svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminProducts=function AdminProducts(props){var headerTitle=\"Administration\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Administration\",link:\"/admin\"},{value:\"Produits\",link:null}];var range=10;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),startPoint=_useState2[0],setStartPoint=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),selectedPage=_useState4[0],setSelectedPage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),allProducts=_useState6[0],setAllProducts=_useState6[1];//Au chargement de la page\nuseEffect(function(){getProducts().then(function(response){setAllProducts(response);});},[]);// Affichage des produits\nvar showProducts=function showProducts(){// Définition de la liste des items affichés\nvar items=[];// Paramètres de la boucle d'affichage\nvar loopMin;var loopMax;// Définition des paramètres pour la boucle d'affichage\nif(allProducts.length-startPoint<range){loopMin=startPoint;loopMax=allProducts.length;}else{loopMin=startPoint;loopMax=startPoint+range;}// Génération des items pour l'affichage\nfor(var i=loopMin;i<loopMax;i++){items.push(/*#__PURE__*/_jsxs(\"article\",{className:\"admin-product-list-item\",children:[allProducts[i].pict_url&&/*#__PURE__*/_jsx(\"section\",{className:\"admin-product-list-item-pict\",children:/*#__PURE__*/_jsx(\"img\",{src:config.product_pict_url+allProducts[i].pict_url,alt:\"Illustration du produit\"})}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-product-list-item-infos\",children:[/*#__PURE__*/_jsx(\"p\",{children:allProducts[i].name}),/*#__PURE__*/_jsxs(\"p\",{children:[allProducts[i].price,\" \\u20AC/Kg TTC\"]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"edit-delete-product-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/products/edit/\"+allProducts[i].id,children:/*#__PURE__*/_jsx(\"img\",{src:editIcon,alt:\"Edit icon\",className:\"edit-delete-product\"})}),/*#__PURE__*/_jsx(Link,{to:\"/admin/products/delete/\"+allProducts[i].id,children:/*#__PURE__*/_jsx(\"img\",{src:deleteIcon,alt:\"Delete icon\",className:\"edit-delete-product\"})})]})]},i));}return/*#__PURE__*/_jsx(\"section\",{className:\"admin-product-list\",children:items});};// Au changement de page\nvar changePage=function changePage(pageNumber){setSelectedPage(pageNumber);if(pageNumber>1){setStartPoint((pageNumber-1)*range);}else{setStartPoint(0);}};// Affichage de la liste des pages\nvar showPagesList=function showPagesList(){var pagesList=[];var numberOfPages=allProducts.length/range;var _loop=function _loop(i){if(i===selectedPage){pagesList.push(/*#__PURE__*/_jsx(\"article\",{className:\"admin-product-page-number-selected\",onClick:function onClick(e){changePage(i);},children:/*#__PURE__*/_jsx(\"p\",{children:i})},i));}else{pagesList.push(/*#__PURE__*/_jsx(\"article\",{className:\"admin-product-page-number\",onClick:function onClick(e){changePage(i);},children:/*#__PURE__*/_jsx(\"p\",{children:i})},i));}};for(var i=1;i<numberOfPages+1;i++){_loop(i);}return/*#__PURE__*/_jsx(\"div\",{className:\"admin-product-page-selection\",children:pagesList});};return/*#__PURE__*/_jsxs(\"section\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminMenu,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Gestion des produits\"}),/*#__PURE__*/_jsx(\"section\",{className:\"admin-add-product-btn\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",component:Link,to:\"/admin/products/add\",children:\"Ajouter un produit\"})}),/*#__PURE__*/_jsx(\"section\",{className:\"product-list-container\",children:showProducts()}),/*#__PURE__*/_jsx(\"section\",{className:\"admin-product-page-selection-container\",children:showPagesList()})]})]}),/*#__PURE__*/_jsx(Footer,{})]});};var mapStateToProps=function mapStateToProps(store){return{};};var mapDispatchToProps={};export default connect(mapStateToProps,mapDispatchToProps)(AdminProducts);","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/admin/adminProducts.js"],"names":["React","useState","useEffect","connect","config","getProducts","Link","Button","Header","HeaderPages","Footer","AdminMenu","AdminProducts","props","headerTitle","headerBreadcrumbs","value","link","range","startPoint","setStartPoint","selectedPage","setSelectedPage","allProducts","setAllProducts","then","response","showProducts","items","loopMin","loopMax","length","i","push","pict_url","product_pict_url","name","price","id","editIcon","deleteIcon","changePage","pageNumber","showPagesList","pagesList","numberOfPages","e","mapStateToProps","store","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {connect} from \"react-redux\"\n\nimport {config} from \"../../config/config\"\nimport {getProducts} from \"../../api/products\"\nimport {Link} from \"react-router-dom\"\n\n//Imports de la librairie MaterialUI\nimport { Button } from '@material-ui/core';\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\nimport AdminMenu from \"../../components/adminMenu\"\n\n//Import des images\nimport editIcon from \"../../assets/icons/edit-blue.svg\"\nimport deleteIcon from \"../../assets/icons/delete-blue.svg\"\n\n\nconst AdminProducts = (props) => {\n    const headerTitle = \"Administration\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"},{value: \"Administration\", link:\"/admin\"},{value: \"Produits\", link:null}]\n    \n    const range = 10\n    const [startPoint, setStartPoint] = useState(0)\n    const [selectedPage, setSelectedPage] = useState(1)\n\n    const [allProducts, setAllProducts] = useState([])\n\n    //Au chargement de la page\n    useEffect(() => {\n        getProducts()\n        .then(response => {\n            setAllProducts(response)\n        })\n\n    }, [])\n\n    // Affichage des produits\n    const showProducts = () => {\n        // Définition de la liste des items affichés\n        let items = []\n        // Paramètres de la boucle d'affichage\n        let loopMin;\n        let loopMax;\n\n        // Définition des paramètres pour la boucle d'affichage\n        if(allProducts.length - startPoint < range){\n          loopMin = startPoint\n          loopMax = allProducts.length  \n        }\n        else {\n            loopMin = startPoint\n            loopMax = startPoint + range\n        }\n\n        // Génération des items pour l'affichage\n        for(let i = loopMin; i < loopMax; i++){\n            items.push(\n                <article className=\"admin-product-list-item\" key={i}>\n                    {allProducts[i].pict_url && \n                    <section className=\"admin-product-list-item-pict\">\n                        <img src={config.product_pict_url + allProducts[i].pict_url}  alt=\"Illustration du produit\"/>\n                        </section>}\n\n                    <section className=\"admin-product-list-item-infos\">\n                        <p>{allProducts[i].name}</p>\n                        <p>{allProducts[i].price} €/Kg TTC</p>\n                    </section>\n\n                    <section className=\"edit-delete-product-container\">\n                        <Link to={\"/admin/products/edit/\"+allProducts[i].id}><img src={editIcon} alt=\"Edit icon\" className=\"edit-delete-product\"/></Link>\n                        <Link to={\"/admin/products/delete/\"+allProducts[i].id}><img src={deleteIcon} alt=\"Delete icon\" className=\"edit-delete-product\"/></Link>\n                    </section>\n                </article>\n            )\n        }\n\n        return(\n            <section className=\"admin-product-list\">\n                {items}\n            </section>\n                \n        )\n    }\n\n    // Au changement de page\n    const changePage = (pageNumber) => {\n        setSelectedPage(pageNumber)\n        if(pageNumber > 1){\n            setStartPoint(((pageNumber-1)*range))\n        }\n        else {\n            setStartPoint(0) \n        }\n    }\n    \n    // Affichage de la liste des pages\n    const showPagesList = () => {\n        let pagesList = []\n        let numberOfPages = allProducts.length / range\n        \n\n        for(let i = 1; i < numberOfPages+1; i ++) {\n            if(i === selectedPage) {\n                pagesList.push(\n                    <article className=\"admin-product-page-number-selected\" onClick={(e) => {changePage(i)}} key={i}>\n                        <p>{i}</p>\n                    </article>\n                )\n            }\n            else {\n                pagesList.push(\n                    <article className=\"admin-product-page-number\" onClick={(e) => {changePage(i)}} key={i}>\n                        <p>{i}</p>\n                    </article>\n                )\n            }\n        }\n\n        return( <div className=\"admin-product-page-selection\">\n            {pagesList}\n        </div>) \n    }\n\n    return(\n        <section className=\"root\">\n                <Header />\n                <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n                <section className=\"admin-container\">\n                    <AdminMenu />\n \n                    <section className=\"admin-content\">\n                        <h4>Gestion des produits</h4>\n                        <section className=\"admin-add-product-btn\">\n                            <Button color=\"primary\" variant=\"contained\" component={Link} to=\"/admin/products/add\">Ajouter un produit</Button>\n                        </section>\n                        <section className=\"product-list-container\">\n                            {showProducts()}\n                        </section>\n                        <section className=\"admin-product-page-selection-container\">\n                            {showPagesList()}\n                        </section>\n                    </section>\n                </section>\n                <Footer />\n        </section>\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n\n    }\n}   \n\nconst mapDispatchToProps = {\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminProducts)"]},"metadata":{},"sourceType":"module"}