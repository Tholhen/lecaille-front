{"ast":null,"code":"import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import{loadAllUsers}from\"../../actions/users/usersAction\";import{getAllUsers}from\"../../api/user\";import{Link}from\"react-router-dom\";//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";import AdminMenu from\"../../components/adminMenu\";//Import des images\nimport editIcon from\"../../assets/icons/edit-blue.svg\";import deleteIcon from\"../../assets/icons/delete-blue.svg\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AdminUsers=function AdminUsers(props){var headerTitle=\"Administration\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Administration\",link:\"/admin\"},{value:\"Utilisateurs\",link:null}];var range=5;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),startPoint=_useState2[0],setStartPoint=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),selectedPage=_useState4[0],setSelectedPage=_useState4[1];//Au chargement de la page\nuseEffect(function(){getAllUsers().then(function(response){props.loadAllUsers(response.data.users);});},[props]);// Affichage des utilisateurs\nvar showUsers=function showUsers(){// Récupération des utilisateurs\nvar users=props.users.users;// Définition de la liste des items affichés\nvar items=[];// Paramètres de la boucle d'affichage\nvar loopMin;var loopMax;// Définition des paramètres pour la boucle d'affichage\nif(users.length-startPoint<range){loopMin=startPoint;loopMax=users.length;}else{loopMin=startPoint;loopMax=startPoint+range;}// Génération des items pour l'affichage\nfor(var i=loopMin;i<loopMax;i++){items.push(/*#__PURE__*/_jsxs(\"article\",{className:\"users-list-item\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"user-item-name\",children:[users[i].first_name,\" \",users[i].last_name]}),/*#__PURE__*/_jsx(\"section\",{className:\"user-item-mail\",children:users[i].email}),/*#__PURE__*/_jsxs(\"section\",{className:\"user-item-city\",children:[users[i].zip,\" \",users[i].city]}),/*#__PURE__*/_jsxs(\"section\",{className:\"edit-delete-user-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/users/edit/\"+users[i].id,children:/*#__PURE__*/_jsx(\"img\",{src:editIcon,alt:\"Edit icon\",className:\"edit-delete-user\"})}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users/delete/\"+users[i].id,children:/*#__PURE__*/_jsx(\"img\",{src:deleteIcon,alt:\"Delete icon\",className:\"edit-delete-user\"})})]})]},i));}return/*#__PURE__*/_jsx(\"section\",{className:\"users-list\",children:items});};// Au changement de page\nvar changePage=function changePage(pageNumber){setSelectedPage(pageNumber);if(pageNumber>1){setStartPoint((pageNumber-1)*range);}else{setStartPoint(0);}};// Affichage de la liste des pages\nvar showPagesList=function showPagesList(){var pagesList=[];var users=props.users.users;var numberOfPages=users.length/range;var _loop=function _loop(i){if(i===selectedPage){pagesList.push(/*#__PURE__*/_jsx(\"article\",{className:\"user-page-number-selected\",onClick:function onClick(e){changePage(i);},children:/*#__PURE__*/_jsx(\"p\",{children:i})},i));}else{pagesList.push(/*#__PURE__*/_jsx(\"article\",{className:\"user-page-number\",onClick:function onClick(e){changePage(i);},children:/*#__PURE__*/_jsx(\"p\",{children:i})},i));}};for(var i=1;i<numberOfPages+1;i++){_loop(i);}return/*#__PURE__*/_jsx(\"section\",{className:\"admin-user-page-selection\",children:pagesList});};return/*#__PURE__*/_jsxs(\"section\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminMenu,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Gestion des utilisateurs\"}),/*#__PURE__*/_jsx(\"section\",{className:\"users-list-container\",children:showUsers()}),/*#__PURE__*/_jsx(\"section\",{className:\"admin-user-page-selection-container\",children:showPagesList()})]})]}),/*#__PURE__*/_jsx(Footer,{})]});};var mapStateToProps=function mapStateToProps(store){return{user:store.user,users:store.users};};var mapDispatchToProps={loadAllUsers:loadAllUsers};export default connect(mapStateToProps,mapDispatchToProps)(AdminUsers);","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/admin/adminUsers.js"],"names":["React","useState","useEffect","connect","loadAllUsers","getAllUsers","Link","Header","HeaderPages","Footer","AdminMenu","AdminUsers","props","headerTitle","headerBreadcrumbs","value","link","range","startPoint","setStartPoint","selectedPage","setSelectedPage","then","response","data","users","showUsers","items","loopMin","loopMax","length","i","push","first_name","last_name","email","zip","city","id","editIcon","deleteIcon","changePage","pageNumber","showPagesList","pagesList","numberOfPages","e","mapStateToProps","store","user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {connect} from \"react-redux\"\nimport {loadAllUsers} from \"../../actions/users/usersAction\"\nimport {getAllUsers} from \"../../api/user\"\nimport {Link} from \"react-router-dom\"\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\nimport AdminMenu from \"../../components/adminMenu\"\n\n//Import des images\nimport editIcon from \"../../assets/icons/edit-blue.svg\"\nimport deleteIcon from \"../../assets/icons/delete-blue.svg\"\n\nconst AdminUsers = (props) => {\n    const headerTitle = \"Administration\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"},{value: \"Administration\", link:\"/admin\"},{value: \"Utilisateurs\", link:null}]\n    \n    const range = 5\n    const [startPoint, setStartPoint] = useState(0)\n    const [selectedPage, setSelectedPage] = useState(1)\n    \n    //Au chargement de la page\n    useEffect(() => {\n        getAllUsers()\n        .then(response => {\n            \n            props.loadAllUsers(response.data.users)\n        })\n\n    }, [props])\n\n    // Affichage des utilisateurs\n    const showUsers = () => {\n        // Récupération des utilisateurs\n        let users = props.users.users\n        // Définition de la liste des items affichés\n        let items = []\n        // Paramètres de la boucle d'affichage\n        let loopMin;\n        let loopMax;\n\n        // Définition des paramètres pour la boucle d'affichage\n        if(users.length - startPoint < range){\n          loopMin = startPoint\n          loopMax = users.length  \n        }\n        else {\n            loopMin = startPoint\n            loopMax = startPoint + range\n        }\n\n        // Génération des items pour l'affichage\n        for(let i = loopMin; i < loopMax; i++){\n            items.push(\n                <article className=\"users-list-item\" key={i}>\n                    <section className=\"user-item-name\">\n                        {users[i].first_name} {users[i].last_name} \n                    </section>\n                    <section className=\"user-item-mail\">\n                        {users[i].email}\n                    </section>\n                    <section className=\"user-item-city\">\n                        {users[i].zip} {users[i].city} \n                    </section>\n                    <section className=\"edit-delete-user-container\">\n                        <Link to={\"/admin/users/edit/\"+users[i].id}><img src={editIcon} alt=\"Edit icon\" className=\"edit-delete-user\"/></Link>\n                        <Link to={\"/admin/users/delete/\"+users[i].id}><img src={deleteIcon} alt=\"Delete icon\" className=\"edit-delete-user\"/></Link>\n                    </section>\n                </article>\n            )\n        }\n\n        return(\n            <section className=\"users-list\">\n                {items}\n            </section>\n                \n        )\n    }\n\n    // Au changement de page\n    const changePage = (pageNumber) => {\n        setSelectedPage(pageNumber)\n        if(pageNumber > 1){\n            setStartPoint(((pageNumber-1)*range))\n        }\n        else {\n            setStartPoint(0) \n        }\n    }\n    \n    // Affichage de la liste des pages\n    const showPagesList = () => {\n        let pagesList = []\n        let users = props.users.users\n        let numberOfPages = users.length / range\n        \n\n        for(let i = 1; i < numberOfPages+1; i ++) {\n            if(i === selectedPage) {\n                pagesList.push(\n                    <article className=\"user-page-number-selected\" onClick={(e) => {changePage(i)}} key={i}>\n                        <p>{i}</p>\n                    </article>\n                )\n            }\n            else {\n                pagesList.push(\n                    <article className=\"user-page-number\" onClick={(e) => {changePage(i)}} key={i}>\n                        <p>{i}</p>\n                    </article>\n                )\n            }\n        }\n\n        return( <section className=\"admin-user-page-selection\">\n            {pagesList}\n        </section>) \n    }\n\n    return(\n        <section className=\"root\">\n                <Header />\n                <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n                <section className=\"admin-container\">\n                    <AdminMenu />\n \n                    <section className=\"admin-content\">\n                        <h4>Gestion des utilisateurs</h4>\n                        <section className=\"users-list-container\">\n                            {showUsers()}\n                        </section>\n                        <section className=\"admin-user-page-selection-container\">\n                            {showPagesList()}\n                        </section>\n                    </section>\n                </section>\n                <Footer />\n        </section>\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        user : store.user,\n        users: store.users\n    }\n}   \n\nconst mapDispatchToProps = {\n    loadAllUsers\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminUsers)"]},"metadata":{},"sourceType":"module"}