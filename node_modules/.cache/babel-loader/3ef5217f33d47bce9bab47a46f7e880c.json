{"ast":null,"code":"import _toConsumableArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{getAllShopOpinions}from\"../../api/shopOpinions\";import{convertDate}from\"../../utils/utils\";import{config}from\"../../config/config\";import{deleteOpinion}from\"../../api/shopOpinions\";//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";import AdminMenu from\"../../components/adminMenu\";//Imports depuis la librairie MaterialUI\nimport{makeStyles}from\"@material-ui/styles\";import{Button}from'@material-ui/core';import DeleteIcon from'@material-ui/icons/Delete';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AdminShopOpinions=function AdminShopOpinions(props){var headerTitle=\"Administration\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Administration\",link:\"/admin\"},{value:\"Avis\",link:null}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),displayedShopOpinions=_useState2[0],setDisplayedShopOpinions=_useState2[1];//Définition des styles MaterialUI\nvar useStyles=makeStyles(function(theme){return{deleteBtn:{color:\"#cc0e00\"}};});var classes=useStyles();//Au chargement de la page\nuseEffect(function(){refreshDisplay();//Suppression de l'avertissement des problèmes de dépendances UNIQUEMENT dans le cas d'un équivalent du ComponentDidMount()\n// eslint-disable-next-line react-hooks/exhaustive-deps \n},[]);var refreshDisplay=function refreshDisplay(){getAllShopOpinions().then(function(shopOpinionsDB){setDisplayedShopOpinions([]);loadDisplayedShopOpinions(shopOpinionsDB);});};var deleteDisplayedOpinion=function deleteDisplayedOpinion(id,index){deleteOpinion(id).then(function(response){refreshDisplay();});};//Chargement des avis à afficher\nvar loadDisplayedShopOpinions=function loadDisplayedShopOpinions(shopOpinions){var _loop=function _loop(i){setDisplayedShopOpinions(function(displayedShopOpinions){return[].concat(_toConsumableArray(displayedShopOpinions),[/*#__PURE__*/_jsxs(\"article\",{className:\"shop-opinion-item\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"shop-opinion-infos\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\\" \",shopOpinions[i].comment,\" \\\"\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Auteur : \",/*#__PURE__*/_jsxs(\"em\",{children:[shopOpinions[i].first_name,\" \",shopOpinions[i].last_name]})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"em\",{children:[\"le \",convertDate(shopOpinions[i].creation_timestamp)]})})]}),shopOpinions[i].pict_url&&/*#__PURE__*/_jsx(\"section\",{className:\"shop-opinion-pict\",children:/*#__PURE__*/_jsx(\"img\",{src:config.shop_opinion_pict_url+shopOpinions[i].pict_url,alt:\"illustration\"+shopOpinions[i].id})}),/*#__PURE__*/_jsx(Button,{className:classes.deleteBtn,onClick:function onClick(){deleteDisplayedOpinion(shopOpinions[i].id,i);},children:/*#__PURE__*/_jsx(DeleteIcon,{})})]},shopOpinions[i].id)]);});};for(var i=0;i<shopOpinions.length;i++){_loop(i);}};//Fonction d'affichage des avis\nvar showDisplayedShopOpinions=function showDisplayedShopOpinions(){return/*#__PURE__*/_jsx(\"section\",{className:\"shop-opinions-container\",children:displayedShopOpinions.length>0?displayedShopOpinions:/*#__PURE__*/_jsx(\"p\",{children:\"Aucun avis \\xE0 afficher\"})});};return/*#__PURE__*/_jsxs(\"section\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminMenu,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Gestion des avis\"}),showDisplayedShopOpinions()]})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default AdminShopOpinions;","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/admin/adminShopOpinions.js"],"names":["React","useState","useEffect","getAllShopOpinions","convertDate","config","deleteOpinion","Header","HeaderPages","Footer","AdminMenu","makeStyles","Button","DeleteIcon","AdminShopOpinions","props","headerTitle","headerBreadcrumbs","value","link","displayedShopOpinions","setDisplayedShopOpinions","useStyles","theme","deleteBtn","color","classes","refreshDisplay","then","shopOpinionsDB","loadDisplayedShopOpinions","deleteDisplayedOpinion","id","index","response","shopOpinions","i","comment","first_name","last_name","creation_timestamp","pict_url","shop_opinion_pict_url","length","showDisplayedShopOpinions"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\n\nimport {getAllShopOpinions} from \"../../api/shopOpinions\"\nimport {convertDate} from \"../../utils/utils\"\nimport {config} from \"../../config/config\"\nimport {deleteOpinion} from \"../../api/shopOpinions\"\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\nimport AdminMenu from \"../../components/adminMenu\"\n\n//Imports depuis la librairie MaterialUI\nimport { makeStyles } from \"@material-ui/styles\"\nimport { Button } from '@material-ui/core'\nimport DeleteIcon from '@material-ui/icons/Delete'\n\nconst AdminShopOpinions = (props) => {\n\n    const headerTitle =\"Administration\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"},{value: \"Administration\", link:\"/admin\"},{value: \"Avis\", link:null}]\n\n    const [displayedShopOpinions, setDisplayedShopOpinions] = useState([])\n\n    //Définition des styles MaterialUI\n    const useStyles = makeStyles((theme) => ({\n        deleteBtn:{\n            color:\"#cc0e00\"\n        }\n        }));\n        \n    const classes = useStyles();\n\n    //Au chargement de la page\n    useEffect(() => {\n        refreshDisplay()\n        //Suppression de l'avertissement des problèmes de dépendances UNIQUEMENT dans le cas d'un équivalent du ComponentDidMount()\n        // eslint-disable-next-line react-hooks/exhaustive-deps \n    }, [])\n\n    const refreshDisplay = () => {\n        getAllShopOpinions()\n        .then(shopOpinionsDB => {\n            setDisplayedShopOpinions([])\n            loadDisplayedShopOpinions(shopOpinionsDB)\n        })\n    }\n\n    const deleteDisplayedOpinion = (id, index) => {\n        deleteOpinion(id)\n        .then(response => {\n            refreshDisplay()\n        })\n    }\n\n    //Chargement des avis à afficher\n    const loadDisplayedShopOpinions = (shopOpinions) => {\n        for(let i = 0; i < shopOpinions.length; i++){\n            setDisplayedShopOpinions(displayedShopOpinions => [...displayedShopOpinions, \n                <article key={shopOpinions[i].id} className=\"shop-opinion-item\">\n                    <section className=\"shop-opinion-infos\">\n                        <p>\" {shopOpinions[i].comment} \"</p>\n                        <p>Auteur : <em>{shopOpinions[i].first_name} {shopOpinions[i].last_name}</em></p>\n                        <p><em>le {convertDate(shopOpinions[i].creation_timestamp)}</em></p>\n                    </section>\n                    {shopOpinions[i].pict_url &&\n                    <section className=\"shop-opinion-pict\">\n                        <img src={config.shop_opinion_pict_url + shopOpinions[i].pict_url} alt={\"illustration\"+shopOpinions[i].id}/>\n                    </section>}\n                    <Button className={classes.deleteBtn} onClick={() => {deleteDisplayedOpinion(shopOpinions[i].id, i)}}><DeleteIcon /></Button>\n                </article>])\n        }\n    }\n\n    //Fonction d'affichage des avis\n    const showDisplayedShopOpinions = () => {\n        return(\n            <section className=\"shop-opinions-container\">\n                {displayedShopOpinions.length > 0 ? displayedShopOpinions : <p>Aucun avis à afficher</p>}\n            </section>\n        )\n    }\n\n    return (\n        <section className=\"root\">\n                <Header />\n                <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n                <section className=\"admin-container\">\n                    <AdminMenu />\n \n                    <section className=\"admin-content\">\n                        <h4>Gestion des avis</h4>\n                        {showDisplayedShopOpinions()}\n                    </section>\n                </section>\n                <Footer />\n        </section>\n    )\n}\n\nexport default AdminShopOpinions"]},"metadata":{},"sourceType":"module"}