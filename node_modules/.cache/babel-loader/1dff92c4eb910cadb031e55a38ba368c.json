{"ast":null,"code":"import _toConsumableArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import{Link}from\"react-router-dom\";import{getAllRequests}from\"../../api/requests\";import{loadAllRequests}from\"../../actions/request/requestAction\";import{convertDate}from\"../../utils/utils\";//Imports des composants de l'UI externes\nimport Header from\"../headers/header\";import HeaderPages from\"../headers/headerPages\";import Footer from\"../footer\";import AdminMenu from\"../../components/adminMenu\";//Imports de la librairie MaterialUI\nimport CreateIcon from'@material-ui/icons/Create';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var AdminRequests=function AdminRequests(props){var headerTitle=\"Administration\";var headerBreadcrumbs=[{value:\"Accueil\",link:\"/\"},{value:\"Administration\",link:\"/admin\"},{value:\"Commandes\",link:null}];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),displayedRequests=_useState2[0],setDisplayedRequests=_useState2[1];//Au chargement de la page\nuseEffect(function(){getAllRequests().then(function(requestsDB){loadDisplayedRequests(requestsDB);});},[]);/*//A chaque modification du redux requests\n    useEffect(() => {\n        loadDisplayedRequests(props.requests.list)\n    }, [props.requests])*/ //Construction de la liste des commandes à afficher\nvar loadDisplayedRequests=function loadDisplayedRequests(requests){var _loop=function _loop(i){setDisplayedRequests(function(displayedRequests){return[].concat(_toConsumableArray(displayedRequests),[/*#__PURE__*/_jsxs(\"article\",{className:\"admin-request-item\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"request-item-header\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"N\\xB0\",requests[i].request_number]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"du \",convertDate(requests[i].request_date)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Statut : \",requests[i].preparation_status]})]}),/*#__PURE__*/_jsx(\"section\",{className:\"request-item-content\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin/request/\"+requests[i].id,className:\"general-link\",children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(CreateIcon,{}),\" Editer / Plus d'infos\"]})})}),/*#__PURE__*/_jsxs(\"section\",{className:\"request-item-resume\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"p\",{children:[requests[i].total_amount,\" \\u20AC TCC\"]})]})]},requests[i].id)]);});};for(var i=0;i<requests.length;i++){_loop(i);}};//Fonction d'affichage de la liste des commandes de\nvar showDisplayedRequests=function showDisplayedRequests(){return/*#__PURE__*/_jsx(\"section\",{children:displayedRequests});};return/*#__PURE__*/_jsxs(\"div\",{className:\"root\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(HeaderPages,{headerTitle:headerTitle,headerBreadcrumbs:headerBreadcrumbs}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-container\",children:[/*#__PURE__*/_jsx(AdminMenu,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Gestion des commandes\"}),showDisplayedRequests()]})]}),/*#__PURE__*/_jsx(Footer,{})]});};var mapStateToProps=function mapStateToProps(store){return{requests:store.requests};};var mapDispatchToProps={loadAllRequests:loadAllRequests};export default connect(mapStateToProps,mapDispatchToProps)(AdminRequests);","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/admin/adminRequests.js"],"names":["React","useState","useEffect","connect","Link","getAllRequests","loadAllRequests","convertDate","Header","HeaderPages","Footer","AdminMenu","CreateIcon","AdminRequests","props","headerTitle","headerBreadcrumbs","value","link","displayedRequests","setDisplayedRequests","then","requestsDB","loadDisplayedRequests","requests","i","request_number","request_date","preparation_status","id","total_amount","length","showDisplayedRequests","mapStateToProps","store","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport {connect} from \"react-redux\"\nimport {Link} from \"react-router-dom\"\n\nimport {getAllRequests} from \"../../api/requests\"\nimport {loadAllRequests} from \"../../actions/request/requestAction\"\nimport {convertDate} from \"../../utils/utils\"\n\n//Imports des composants de l'UI externes\nimport Header from \"../headers/header\"\nimport HeaderPages from \"../headers/headerPages\"\nimport Footer from \"../footer\"\nimport AdminMenu from \"../../components/adminMenu\"\n\n//Imports de la librairie MaterialUI\nimport CreateIcon from '@material-ui/icons/Create'\n\nconst AdminRequests = (props) => {\n\n    const headerTitle =\"Administration\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"},{value: \"Administration\", link:\"/admin\"},{value: \"Commandes\", link:null}]\n\n    const [displayedRequests, setDisplayedRequests] = useState([])\n\n    //Au chargement de la page\n    useEffect(() => {\n        getAllRequests()\n        .then(requestsDB => {\n            loadDisplayedRequests(requestsDB)\n        })\n    }, [])\n\n    /*//A chaque modification du redux requests\n    useEffect(() => {\n        loadDisplayedRequests(props.requests.list)\n    }, [props.requests])*/\n\n    //Construction de la liste des commandes à afficher\n    const loadDisplayedRequests = (requests) => {\n        for(let i = 0; i < requests.length; i++){\n            setDisplayedRequests(displayedRequests => [...displayedRequests,\n                <article key={requests[i].id} className=\"admin-request-item\">\n                    <section className=\"request-item-header\">\n                        <p>N°{requests[i].request_number}</p>\n                        <p>du {convertDate(requests[i].request_date)}</p>\n                        <p>Statut : {requests[i].preparation_status}</p>\n                    </section>\n                    <section className=\"request-item-content\">\n                        <Link to={\"/admin/request/\"+requests[i].id} className=\"general-link\"><p><CreateIcon /> Editer / Plus d'infos</p></Link>\n                    </section>\n                    <section className=\"request-item-resume\">\n                        <p>Total</p>\n                        <p>{requests[i].total_amount} € TCC</p>\n                    </section>\n                </article>])\n        }\n    }  \n\n    //Fonction d'affichage de la liste des commandes de\n    const showDisplayedRequests = () => {\n        return(\n            <section>\n                {displayedRequests}\n            </section>\n        )\n    }\n\n    return (    \n        <div className=\"root\">\n                <Header />\n                <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n                <section className=\"admin-container\">\n                    <AdminMenu />\n \n                    <section className=\"admin-content\">\n                        <h4>Gestion des commandes</h4>\n                        {showDisplayedRequests()}\n                    </section>\n                </section>\n                <Footer />\n        </div>\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        requests: store.requests\n    }\n}\n\nconst mapDispatchToProps = {\n    loadAllRequests\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminRequests)"]},"metadata":{},"sourceType":"module"}