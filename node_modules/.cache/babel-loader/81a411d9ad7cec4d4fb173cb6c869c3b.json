{"ast":null,"code":"var _jsxFileName = \"/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/shop.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { loadProducts } from \"../actions/product/productAction\";\nimport { config } from \"../config/config\";\nimport { getBasket } from \"../utils/basket\";\nimport { getOneProduct, getProducts, getAllProductCat } from \"../api/products\"; //Imports des composants de l'UI externes\n\nimport Header from \"./headers/header\";\nimport HeaderPages from \"./headers/headerPages\";\nimport Footer from \"./footer\"; //Imports depuis la librairie MaterialUI\n\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Button } from '@material-ui/core';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport SearchIcon from '@material-ui/icons/Search';\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Shop = props => {\n  _s();\n\n  const headerTitle = \"Boutique\";\n  const headerBreadcrumbs = [{\n    value: \"Accueil\",\n    link: \"/\"\n  }, {\n    value: \"Boutique\",\n    link: null\n  }];\n  const [userSearchValue, setUserSearchValue] = useState(\"\");\n  const [categories, setCategories] = useState([]);\n  const [filters, setFilters] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [dataRefreshNeeded, setDataRefreshNeeded] = useState(false);\n  const [basket, setBasket] = useState([]);\n  const [displayedBasket, setDisplayedBasket] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n  let basketTotalAmount = 0; //Définition des styles MaterialUI\n\n  const useStyles = makeStyles(theme => ({\n    margin: {\n      margin: theme.spacing(1)\n    },\n    addToBasket: {\n      marginTop: theme.spacing(2),\n      width: \"3em\"\n    },\n    categories: {\n      width: \"100%\"\n    },\n    filterButton: {\n      margin: theme.spacing(1)\n    }\n  }));\n  const classes = useStyles(); //A chargement de la page\n\n  useEffect(() => {\n    //Chargement des produits dans le redux depuis la BDD s'il est vide\n    if (props.products.list.length === 0) {\n      getProducts().then(productsDB => {\n        props.loadProducts(productsDB);\n        setProducts(productsDB);\n      });\n    } else {\n      setProducts(props.products.list);\n    }\n\n    getAllProductCat().then(categoriesDB => {\n      setCategories(categoriesDB);\n      /*if(categoriesDB) {\n          categoriesDB.map((category) => {\n              setFilters(filters => [...filters, {name:category.label, id: category.id, isChecked: false}])\n          })\n      }*/\n    });\n    setBasket(getBasket());\n    loadDisplayedBasket();\n  }, []); //Au click sur les checkboxes, on inverse la valeur checked\n\n  const handleCheck = e => {\n    filters[filters.findIndex(checkbox => checkbox.name === e.target.name)].isChecked = !filters[filters.findIndex(checkbox => checkbox.name === e.target.name)].isChecked;\n    setDataRefreshNeeded(true);\n  }; //Filtrage des résultats\n\n\n  const filterProducts = () => {\n    if (dataRefreshNeeded) {\n      let datas = {};\n\n      if (userSearchValue) {\n        datas = {\n          user_search_value: userSearchValue\n        };\n      } else {\n        let selectedCategories = [];\n        filters.map(filter => {\n          if (filter.isChecked) {\n            selectedCategories.push(filter.id);\n          }\n        });\n        datas = {\n          categories: selectedCategories\n        };\n      }\n\n      getProducts(datas).then(productsDB => {\n        props.loadProducts(productsDB);\n        setProducts(productsDB);\n        setDataRefreshNeeded(false);\n      });\n    }\n  };\n\n  const resetFilters = () => {\n    filters.map(filter => {\n      filter.value = false;\n    });\n    setUserSearchValue(\"\");\n  };\n\n  const getCheckboxValue = checkboxName => {\n    /*if(filters[filters.findIndex(checkbox => checkbox.name === checkboxName)] !== undefined){\n        return filters[filters.findIndex(checkbox => checkbox.name === checkboxName)]\n    }*/\n    if (filters.filter(checkbox => {\n      return checkbox.name === checkboxName;\n    })[0] !== undefined) {\n      return filters.filter(checkbox => {\n        return checkbox.name === checkboxName;\n      })[0].isChecked;\n    }\n  }; //Chargement du panier à afficher\n\n\n  const loadDisplayedBasket = () => {\n    setDisplayedBasket([]);\n\n    for (let i = 0; i < basket.length; i++) {\n      console.log(\"i=\", i);\n      getOneProduct(basket[i].productId).then(product => {\n        let productAmount = (basket[i].quantity * product.price / 1000).toFixed(2);\n        setTotalAmount(totalAmount => totalAmount + parseFloat(productAmount));\n        setDisplayedBasket(displayedBasket => [...displayedBasket, /*#__PURE__*/_jsxDEV(\"article\", {\n          className: \"aside-basket-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"aside-basket-item-pict\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: config.product_pict_url + product.pict_url,\n              alt: \"illustration\" + product.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"aside-basket-item-infos\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              className: \"general-link\",\n              to: \"/shop/products/\" + basketItem.id,\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 100\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 97\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: [basketItem.quantity, \" g\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [productAmount, \" \\u20AC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 36\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }, this)]);\n      });\n      {\n        basket.map((basketItem, index) => {\n          let product = getOneProduct(basketItem.id);\n          let productAmount = (basketItem.quantity * product.price / 1000).toFixed(2);\n          basketTotalAmount += parseFloat(productAmount);\n          return /*#__PURE__*/_jsxDEV(\"article\", {\n            className: \"aside-basket-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"aside-basket-item-pict\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: config.product_pict_url + product.pict_url,\n                alt: \"illustration\" + product.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n              className: \"aside-basket-item-infos\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                className: \"general-link\",\n                to: \"/shop/products/\" + basketItem.id,\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: product.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 96\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 93\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [basketItem.quantity, \" g\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 186,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [productAmount, \" \\u20AC\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 32\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 21\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 17\n          }, this);\n        });\n      }\n    }\n  }; //Fonction d'affichage du panier\n\n\n  const showDisplayedBasket = () => {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"aside-basket\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"aside-basket-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Panier\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"aside-basket-content\",\n        children: displayedBasket\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"aside-basket-footer\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"aside-basket-total-amount\",\n          children: [\"Total : \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [basketTotalAmount.toFixed(2), \" \\u20AC\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 78\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          component: Link,\n          to: \"/shop/basket\",\n          children: \"Voir mon panier\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"root\",\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(HeaderPages, {\n      headerTitle: headerTitle,\n      headerBreadcrumbs: headerBreadcrumbs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"shop-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"shop-content-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"shop-content-header\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: products && products.length + \" résultat(s)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"shop-content\",\n          children: products && products.map((product, index) => {\n            return /*#__PURE__*/_jsxDEV(\"article\", {\n              className: \"shop-content-item\",\n              children: /*#__PURE__*/_jsxDEV(\"section\", {\n                className: \"shop-content-item-infos-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"shop-content-item-pict\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: config.product_pict_url + product.pict_url,\n                    alt: \"illustration\" + index\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n                  className: \"shop-content-item-infos-text\",\n                  children: [/*#__PURE__*/_jsxDEV(\"article\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"shop-content-item-category\",\n                      children: product.category\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"shop-content-item-name\",\n                      children: product.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"shop-content-item-desc\",\n                    children: product.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"shop-content-item-price\",\n                    children: [product.price, \" \\u20AC/Kg\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    color: \"primary\",\n                    variant: \"contained\",\n                    className: classes.addToBasket,\n                    component: Link,\n                    to: \"/shop/products/\" + product.id,\n                    children: /*#__PURE__*/_jsxDEV(AddShoppingCartIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 172\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 37\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 33\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"shop-aside\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"aside-searchbox\",\n          children: /*#__PURE__*/_jsxDEV(FormControl, {\n            className: \"searchbox-formcontrol\",\n            children: /*#__PURE__*/_jsxDEV(TextField, {\n              type: \"search\",\n              variant: \"filled\",\n              className: classes.margin,\n              label: \"Rechercher un produit\",\n              InputLabelProps: {\n                style: {\n                  color: \"#B4B4B4\"\n                }\n              },\n              InputProps: {\n                style: {\n                  color: \"#12455A\"\n                }\n              },\n              value: userSearchValue,\n              onChange: e => {\n                setUserSearchValue(e.target.value);\n                setDataRefreshNeeded(true);\n              },\n              InputProps: {\n                startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                  position: \"start\",\n                  children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 49\n                }, this)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"aside-categories\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"aside-categories-header\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Cat\\xE9gories\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"aside-categories-content\",\n            children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n              className: classes.categories,\n              children: categories && categories.map((category, index) => {\n                return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                  control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                    name: category.label,\n                    color: \"primary\",\n                    onChange: e => {\n                      handleCheck(e);\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 283,\n                    columnNumber: 50\n                  }, this),\n                  label: category.label\n                }, category.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 44\n                }, this);\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              className: classes.filterButton,\n              onClick: e => {\n                resetFilters();\n                filterProducts();\n              },\n              children: \"R\\xE9initialiser les filtres\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              className: classes.filterButton,\n              onClick: e => {\n                filterProducts();\n              },\n              children: \"Filtrer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 21\n        }, this), basket && showDisplayedBasket()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Shop, \"lbWrfOjyW5/wnmL2uBJdEjXJhlw=\", true);\n\n_c = Shop;\n\nconst mapStateToProps = store => {\n  return {\n    products: store.products\n  };\n};\n\nconst mapDispatchToProps = {\n  loadProducts\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop);\n\nvar _c;\n\n$RefreshReg$(_c, \"Shop\");","map":{"version":3,"sources":["/Users/nicolas/Documents/Travail/Web Developper/3W Academy/Projet/site/lecaille-front/src/containers/shop.js"],"names":["React","useState","useEffect","Link","connect","loadProducts","config","getBasket","getOneProduct","getProducts","getAllProductCat","Header","HeaderPages","Footer","TextField","makeStyles","Button","FormHelperText","FormControl","InputAdornment","SearchIcon","AddShoppingCartIcon","FormGroup","FormControlLabel","Checkbox","Shop","props","headerTitle","headerBreadcrumbs","value","link","userSearchValue","setUserSearchValue","categories","setCategories","filters","setFilters","products","setProducts","dataRefreshNeeded","setDataRefreshNeeded","basket","setBasket","displayedBasket","setDisplayedBasket","totalAmount","setTotalAmount","basketTotalAmount","useStyles","theme","margin","spacing","addToBasket","marginTop","width","filterButton","classes","list","length","then","productsDB","categoriesDB","loadDisplayedBasket","handleCheck","e","findIndex","checkbox","name","target","isChecked","filterProducts","datas","user_search_value","selectedCategories","map","filter","push","id","resetFilters","getCheckboxValue","checkboxName","undefined","i","console","log","productId","product","productAmount","quantity","price","toFixed","parseFloat","product_pict_url","pict_url","basketItem","index","showDisplayedBasket","category","description","style","color","startAdornment","label","mapStateToProps","store","mapDispatchToProps"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,YAAR,QAA2B,kCAA3B;AAEA,SAAQC,MAAR,QAAqB,kBAArB;AACA,SAAQC,SAAR,QAAwB,iBAAxB;AAEA,SAAQC,aAAR,EAAuBC,WAAvB,EAAmCC,gBAAnC,QAA0D,iBAA1D,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,mBAAP,MAAgC,oCAAhC;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,QAAP,MAAqB,4BAArB;;;AAEA,MAAMC,IAAI,GAAIC,KAAD,IAAW;AAAA;;AAEpB,QAAMC,WAAW,GAAG,UAApB;AACA,QAAMC,iBAAiB,GAAG,CAAC;AAACC,IAAAA,KAAK,EAAE,SAAR;AAAmBC,IAAAA,IAAI,EAAC;AAAxB,GAAD,EACC;AAACD,IAAAA,KAAK,EAAE,UAAR;AAAoBC,IAAAA,IAAI,EAAC;AAAzB,GADD,CAA1B;AAIA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwC/B,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACgC,UAAD,EAAaC,aAAb,IAA8BjC,QAAQ,CAAC,EAAD,CAA5C;AAEA,QAAM,CAACkC,OAAD,EAAUC,UAAV,IAAwBnC,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAM,CAACoC,QAAD,EAAWC,WAAX,IAA0BrC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACsC,iBAAD,EAAoBC,oBAApB,IAA4CvC,QAAQ,CAAC,KAAD,CAA1D;AAEA,QAAM,CAACwC,MAAD,EAASC,SAAT,IAAsBzC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAAC0C,eAAD,EAAkBC,kBAAlB,IAAwC3C,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAAC4C,WAAD,EAAcC,cAAd,IAAgC7C,QAAQ,CAAC,CAAD,CAA9C;AAEA,MAAI8C,iBAAiB,GAAG,CAAxB,CAnBoB,CAoBpB;;AACA,QAAMC,SAAS,GAAGjC,UAAU,CAAEkC,KAAD,KAAY;AACrCC,IAAAA,MAAM,EAAC;AACHA,MAAAA,MAAM,EAAED,KAAK,CAACE,OAAN,CAAc,CAAd;AADL,KAD8B;AAIrCC,IAAAA,WAAW,EAAC;AACRC,MAAAA,SAAS,EAAEJ,KAAK,CAACE,OAAN,CAAc,CAAd,CADH;AAERG,MAAAA,KAAK,EAAC;AAFE,KAJyB;AAQrCrB,IAAAA,UAAU,EAAC;AACPqB,MAAAA,KAAK,EAAC;AADC,KAR0B;AAWrCC,IAAAA,YAAY,EAAC;AACTL,MAAAA,MAAM,EAACD,KAAK,CAACE,OAAN,CAAc,CAAd;AADE;AAXwB,GAAZ,CAAD,CAA5B;AAgBA,QAAMK,OAAO,GAAGR,SAAS,EAAzB,CArCoB,CAwCpB;;AACA9C,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,QAAGwB,KAAK,CAACW,QAAN,CAAeoB,IAAf,CAAoBC,MAApB,KAA6B,CAAhC,EAAkC;AAC9BjD,MAAAA,WAAW,GACVkD,IADD,CACMC,UAAU,IAAI;AAChBlC,QAAAA,KAAK,CAACrB,YAAN,CAAmBuD,UAAnB;AACAtB,QAAAA,WAAW,CAACsB,UAAD,CAAX;AACH,OAJD;AAKH,KAND,MAMO;AACHtB,MAAAA,WAAW,CAACZ,KAAK,CAACW,QAAN,CAAeoB,IAAhB,CAAX;AACH;;AAED/C,IAAAA,gBAAgB,GACfiD,IADD,CACME,YAAY,IAAI;AAClB3B,MAAAA,aAAa,CAAC2B,YAAD,CAAb;AACA;AACZ;AACA;AACA;AACA;AAES,KATD;AAWAnB,IAAAA,SAAS,CAACnC,SAAS,EAAV,CAAT;AACAuD,IAAAA,mBAAmB;AACtB,GAzBQ,EAyBN,EAzBM,CAAT,CAzCoB,CAoEpB;;AACA,QAAMC,WAAW,GAAIC,CAAD,IAAO;AACvB7B,IAAAA,OAAO,CAACA,OAAO,CAAC8B,SAAR,CAAkBC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,KAAkBH,CAAC,CAACI,MAAF,CAASD,IAAzD,CAAD,CAAP,CAAwEE,SAAxE,GAAoF,CAAClC,OAAO,CAACA,OAAO,CAAC8B,SAAR,CAAkBC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,KAAkBH,CAAC,CAACI,MAAF,CAASD,IAAzD,CAAD,CAAP,CAAwEE,SAA7J;AACA7B,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH,GAHD,CArEoB,CA0EpB;;;AACA,QAAM8B,cAAc,GAAG,MAAM;AACzB,QAAG/B,iBAAH,EAAqB;AACjB,UAAIgC,KAAK,GAAG,EAAZ;;AACA,UAAGxC,eAAH,EAAmB;AACfwC,QAAAA,KAAK,GAAG;AAACC,UAAAA,iBAAiB,EAAEzC;AAApB,SAAR;AAEH,OAHD,MAGO;AACH,YAAI0C,kBAAkB,GAAG,EAAzB;AACAtC,QAAAA,OAAO,CAACuC,GAAR,CAAYC,MAAM,IAAI;AAClB,cAAGA,MAAM,CAACN,SAAV,EAAoB;AAChBI,YAAAA,kBAAkB,CAACG,IAAnB,CAAwBD,MAAM,CAACE,EAA/B;AACH;AACJ,SAJD;AAKAN,QAAAA,KAAK,GAAG;AAACtC,UAAAA,UAAU,EAAGwC;AAAd,SAAR;AACH;;AAEDhE,MAAAA,WAAW,CAAC8D,KAAD,CAAX,CACKZ,IADL,CACUC,UAAU,IAAI;AAChBlC,QAAAA,KAAK,CAACrB,YAAN,CAAmBuD,UAAnB;AACAtB,QAAAA,WAAW,CAACsB,UAAD,CAAX;AACApB,QAAAA,oBAAoB,CAAC,KAAD,CAApB;AACH,OALL;AAMH;AAEJ,GAxBD;;AA0BA,QAAMsC,YAAY,GAAG,MAAM;AACvB3C,IAAAA,OAAO,CAACuC,GAAR,CAAaC,MAAD,IAAY;AACpBA,MAAAA,MAAM,CAAC9C,KAAP,GAAe,KAAf;AACH,KAFD;AAGAG,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACH,GALD;;AAOA,QAAM+C,gBAAgB,GAAIC,YAAD,IAAkB;AACvC;AACR;AACA;AACQ,QAAG7C,OAAO,CAACwC,MAAR,CAAeT,QAAQ,IAAI;AAAE,aAAOA,QAAQ,CAACC,IAAT,KAAkBa,YAAzB;AAAsC,KAAnE,EAAqE,CAArE,MAA4EC,SAA/E,EAAyF;AACrF,aAAO9C,OAAO,CAACwC,MAAR,CAAeT,QAAQ,IAAI;AAAE,eAAOA,QAAQ,CAACC,IAAT,KAAkBa,YAAzB;AAAsC,OAAnE,EAAqE,CAArE,EAAwEX,SAA/E;AACH;AAEJ,GARD,CA5GoB,CAsHpB;;;AACA,QAAMP,mBAAmB,GAAG,MAAM;AAE9BlB,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;;AACA,SAAI,IAAIsC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGzC,MAAM,CAACiB,MAA1B,EAAkCwB,CAAC,EAAnC,EAAuC;AACnCC,MAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBF,CAAlB;AACA1E,MAAAA,aAAa,CAACiC,MAAM,CAACyC,CAAD,CAAN,CAAUG,SAAX,CAAb,CACC1B,IADD,CACO2B,OAAD,IAAa;AACf,YAAIC,aAAa,GAAG,CAAC9C,MAAM,CAACyC,CAAD,CAAN,CAAUM,QAAV,GAAqBF,OAAO,CAACG,KAA7B,GAAmC,IAApC,EAA0CC,OAA1C,CAAkD,CAAlD,CAApB;AAEA5C,QAAAA,cAAc,CAACD,WAAW,IAAIA,WAAW,GAAG8C,UAAU,CAACJ,aAAD,CAAxC,CAAd;AACA3C,QAAAA,kBAAkB,CAACD,eAAe,IAAI,CAAC,GAAGA,eAAJ,eAClC;AAAS,UAAA,SAAS,EAAC,mBAAnB;AAAA,kCACI;AAAS,YAAA,SAAS,EAAC,wBAAnB;AAAA,mCACI;AAAK,cAAA,GAAG,EAAErC,MAAM,CAACsF,gBAAP,GAA0BN,OAAO,CAACO,QAA5C;AAAsD,cAAA,GAAG,EAAE,iBAAeP,OAAO,CAACT;AAAlF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAS,YAAA,SAAS,EAAC,yBAAnB;AAAA,oCACI,QAAC,IAAD;AAAM,cAAA,SAAS,EAAC,cAAhB;AAA+B,cAAA,EAAE,EAAE,oBAAkBiB,UAAU,CAACjB,EAAhE;AAAA,qCAAoE;AAAA,uCAAG;AAAA,4BAAOS,OAAO,CAACnB;AAAf;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA;AAApE;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA,sCACI;AAAA,2BAAI2B,UAAU,CAACN,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA,uCAAG;AAAA,6BAAOD,aAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA,WAA4CL,CAA5C;AAAA;AAAA;AAAA;AAAA,gBADkC,CAApB,CAAlB;AAaH,OAlBD;AAmBA;AAACzC,QAAAA,MAAM,CAACiC,GAAP,CAAW,CAACoB,UAAD,EAAaC,KAAb,KAAuB;AAC/B,cAAIT,OAAO,GAAG9E,aAAa,CAACsF,UAAU,CAACjB,EAAZ,CAA3B;AACA,cAAIU,aAAa,GAAG,CAACO,UAAU,CAACN,QAAX,GAAsBF,OAAO,CAACG,KAA9B,GAAoC,IAArC,EAA2CC,OAA3C,CAAmD,CAAnD,CAApB;AACA3C,UAAAA,iBAAiB,IAAI4C,UAAU,CAACJ,aAAD,CAA/B;AAGA,8BACA;AAAS,YAAA,SAAS,EAAC,mBAAnB;AAAA,oCACI;AAAS,cAAA,SAAS,EAAC,wBAAnB;AAAA,qCACI;AAAK,gBAAA,GAAG,EAAEjF,MAAM,CAACsF,gBAAP,GAA0BN,OAAO,CAACO,QAA5C;AAAsD,gBAAA,GAAG,EAAE,iBAAeP,OAAO,CAACT;AAAlF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eAII;AAAS,cAAA,SAAS,EAAC,yBAAnB;AAAA,sCACI,QAAC,IAAD;AAAM,gBAAA,SAAS,EAAC,cAAhB;AAA+B,gBAAA,EAAE,EAAE,oBAAkBiB,UAAU,CAACjB,EAAhE;AAAA,uCAAoE;AAAA,yCAAG;AAAA,8BAAOS,OAAO,CAACnB;AAAf;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA;AAApE;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA,wCACI;AAAA,6BAAI2B,UAAU,CAACN,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAA,yCAAG;AAAA,+BAAOD,aAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAH;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ;AAAA,aAA4CQ,KAA5C;AAAA;AAAA;AAAA;AAAA,kBADA;AAaH,SAnBA;AAmBE;AACN;AACJ,GA7CD,CAvHoB,CAsKpB;;;AACA,QAAMC,mBAAmB,GAAG,MAAM;AAE9B,wBAAQ;AAAS,MAAA,SAAS,EAAC,cAAnB;AAAA,8BACQ;AAAS,QAAA,SAAS,EAAC,qBAAnB;AAAA,+BACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADR,eAIQ;AAAS,QAAA,SAAS,EAAC,sBAAnB;AAAA,kBACKrD;AADL;AAAA;AAAA;AAAA;AAAA,cAJR,eAOQ;AAAS,QAAA,SAAS,EAAC,qBAAnB;AAAA,gCACI;AAAG,UAAA,SAAS,EAAC,2BAAb;AAAA,8CAAiD;AAAA,uBAAOI,iBAAiB,CAAC2C,OAAlB,CAA0B,CAA1B,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAC,WAAhB;AAA4B,UAAA,KAAK,EAAC,SAAlC;AAA4C,UAAA,SAAS,EAAEvF,IAAvD;AAA6D,UAAA,EAAE,EAAC,cAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAPR;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AAYH,GAdD;;AAgBA,sBACI;AAAS,IAAA,SAAS,EAAC,MAAnB;AAAA,4BACI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,QAAC,WAAD;AAAa,MAAA,WAAW,EAAEwB,WAA1B;AAAuC,MAAA,iBAAiB,EAAEC;AAA1D;AAAA;AAAA;AAAA;AAAA,YAFJ,eAGI;AAAS,MAAA,SAAS,EAAC,gBAAnB;AAAA,8BAII;AAAS,QAAA,SAAS,EAAC,wBAAnB;AAAA,gCACI;AAAS,UAAA,SAAS,EAAC,qBAAnB;AAAA,iCACI;AAAA,sBAAIS,QAAQ,IAAIA,QAAQ,CAACqB,MAAT,GAAkB;AAAlC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAS,UAAA,SAAS,EAAC,cAAnB;AAAA,oBAEKrB,QAAQ,IAAKA,QAAQ,CAACqC,GAAT,CAAa,CAACY,OAAD,EAAUS,KAAV,KAAoB;AAC3C,gCACI;AAAqB,cAAA,SAAS,EAAC,mBAA/B;AAAA,qCACI;AAAS,gBAAA,SAAS,EAAC,mCAAnB;AAAA,wCACI;AAAS,kBAAA,SAAS,EAAC,wBAAnB;AAAA,yCACI;AAAK,oBAAA,GAAG,EAAEzF,MAAM,CAACsF,gBAAP,GAA0BN,OAAO,CAACO,QAA5C;AAAsD,oBAAA,GAAG,EAAE,iBAAeE;AAA1E;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBADJ,eAII;AAAS,kBAAA,SAAS,EAAC,8BAAnB;AAAA,0CACI;AAAA,4CACI;AAAG,sBAAA,SAAS,EAAC,4BAAb;AAAA,gCAA2CT,OAAO,CAACW;AAAnD;AAAA;AAAA;AAAA;AAAA,4BADJ,eAEI;AAAG,sBAAA,SAAS,EAAC,wBAAb;AAAA,gCAAuCX,OAAO,CAACnB;AAA/C;AAAA;AAAA;AAAA;AAAA,4BAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAMI;AAAG,oBAAA,SAAS,EAAC,wBAAb;AAAA,8BAAuCmB,OAAO,CAACY;AAA/C;AAAA;AAAA;AAAA;AAAA,0BANJ,eAOI;AAAG,oBAAA,SAAS,EAAC,yBAAb;AAAA,+BAAwCZ,OAAO,CAACG,KAAhD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPJ,eAQI,QAAC,MAAD;AAAQ,oBAAA,KAAK,EAAC,SAAd;AAAwB,oBAAA,OAAO,EAAC,WAAhC;AAA4C,oBAAA,SAAS,EAAEjC,OAAO,CAACJ,WAA/D;AAA4E,oBAAA,SAAS,EAAEjD,IAAvF;AAA6F,oBAAA,EAAE,EAAE,oBAAkBmF,OAAO,CAACT,EAA3H;AAAA,2CAA+H,QAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAA/H;AAAA;AAAA;AAAA;AAAA,0BARJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,eAAckB,KAAd;AAAA;AAAA;AAAA;AAAA,oBADJ;AAoBH,WArBa;AAFlB;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ,eAmCI;AAAO,QAAA,SAAS,EAAC,YAAjB;AAAA,gCACI;AAAS,UAAA,SAAS,EAAC,iBAAnB;AAAA,iCACI,QAAC,WAAD;AAAa,YAAA,SAAS,EAAC,uBAAvB;AAAA,mCACI,QAAC,SAAD;AAAW,cAAA,IAAI,EAAC,QAAhB;AACY,cAAA,OAAO,EAAC,QADpB;AAEY,cAAA,SAAS,EAAEvC,OAAO,CAACN,MAF/B;AAGY,cAAA,KAAK,EAAC,uBAHlB;AAIY,cAAA,eAAe,EAAE;AAACiD,gBAAAA,KAAK,EAAG;AAACC,kBAAAA,KAAK,EAAG;AAAT;AAAT,eAJ7B;AAKY,cAAA,UAAU,EAAE;AAACD,gBAAAA,KAAK,EAAG;AAACC,kBAAAA,KAAK,EAAG;AAAT;AAAT,eALxB;AAMY,cAAA,KAAK,EAAErE,eANnB;AAOY,cAAA,QAAQ,EAAGiC,CAAD,IAAO;AAAChC,gBAAAA,kBAAkB,CAACgC,CAAC,CAACI,MAAF,CAASvC,KAAV,CAAlB;AACAW,gBAAAA,oBAAoB,CAAC,IAAD,CAApB;AAA2B,eARzD;AASY,cAAA,UAAU,EAAE;AACR6D,gBAAAA,cAAc,eACV,QAAC,cAAD;AAAgB,kBAAA,QAAQ,EAAC,OAAzB;AAAA,yCACA,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAFI;AATxB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAwBI;AAAS,UAAA,SAAS,EAAC,kBAAnB;AAAA,kCACI;AAAS,YAAA,SAAS,EAAC,yBAAnB;AAAA,mCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII;AAAS,YAAA,SAAS,EAAC,0BAAnB;AAAA,oCACI,QAAC,SAAD;AAAW,cAAA,SAAS,EAAE7C,OAAO,CAACvB,UAA9B;AAAA,wBACKA,UAAU,IAAIA,UAAU,CAACyC,GAAX,CAAe,CAACuB,QAAD,EAAWF,KAAX,KAAqB;AAC/C,oCAAO,QAAC,gBAAD;AACH,kBAAA,OAAO,eAAE,QAAC,QAAD;AAAU,oBAAA,IAAI,EAAEE,QAAQ,CAACK,KAAzB;AAAgC,oBAAA,KAAK,EAAC,SAAtC;AAAgD,oBAAA,QAAQ,EAAGtC,CAAD,IAAO;AAACD,sBAAAA,WAAW,CAACC,CAAD,CAAX;AAAe;AAAjF;AAAA;AAAA;AAAA;AAAA,0BADN;AAEH,kBAAA,KAAK,EAAEiC,QAAQ,CAACK;AAFb,mBAGEL,QAAQ,CAACpB,EAHX;AAAA;AAAA;AAAA;AAAA,wBAAP;AAKH,eANc;AADnB;AAAA;AAAA;AAAA;AAAA,oBADJ,eAWK,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAC,SAAd;AAAwB,cAAA,SAAS,EAAErB,OAAO,CAACD,YAA3C;AAAyD,cAAA,OAAO,EAAGS,CAAD,IAAO;AACtEc,gBAAAA,YAAY;AACZR,gBAAAA,cAAc;AAAG,eAFpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXL,eAcI,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,WAAhB;AAA4B,cAAA,KAAK,EAAC,SAAlC;AAA4C,cAAA,SAAS,EAAEd,OAAO,CAACD,YAA/D;AAA6E,cAAA,OAAO,EAAGS,CAAD,IAAO;AAACM,gBAAAA,cAAc;AAAG,eAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAxBJ,EAgFK7B,MAAM,IAAIuD,mBAAmB,EAhFlC;AAAA;AAAA;AAAA;AAAA;AAAA,cAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAHJ,eA0HI,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YA1HJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA8HH,CArTD;;GAAMvE,I;;KAAAA,I;;AAuTN,MAAM8E,eAAe,GAAIC,KAAD,IAAW;AAC/B,SAAO;AACHnE,IAAAA,QAAQ,EAAEmE,KAAK,CAACnE;AADb,GAAP;AAGH,CAJD;;AAMA,MAAMoE,kBAAkB,GAAG;AACvBpG,EAAAA;AADuB,CAA3B;AAIA,eAAeD,OAAO,CAACmG,eAAD,EAAkBE,kBAAlB,CAAP,CAA6ChF,IAA7C,CAAf","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport {Link} from \"react-router-dom\"\nimport {connect} from \"react-redux\"\nimport {loadProducts} from \"../actions/product/productAction\"\n\nimport {config} from \"../config/config\"\nimport {getBasket} from \"../utils/basket\"\n\nimport {getOneProduct, getProducts,getAllProductCat} from \"../api/products\"\n\n//Imports des composants de l'UI externes\nimport Header from \"./headers/header\"\nimport HeaderPages from \"./headers/headerPages\"\nimport Footer from \"./footer\"\n\n//Imports depuis la librairie MaterialUI\nimport TextField from '@material-ui/core/TextField'\nimport { makeStyles } from \"@material-ui/styles\"\nimport { Button } from '@material-ui/core'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport SearchIcon from '@material-ui/icons/Search'\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart'\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox'\n\nconst Shop = (props) => {\n\n    const headerTitle = \"Boutique\"\n    const headerBreadcrumbs = [{value: \"Accueil\", link:\"/\"},\n                               {value: \"Boutique\", link:null}]\n\n    \n    const [userSearchValue, setUserSearchValue] = useState(\"\")\n    const [categories, setCategories] = useState([])\n    \n    const [filters, setFilters] = useState([])\n\n    const [products, setProducts] = useState([])\n    const [dataRefreshNeeded, setDataRefreshNeeded] = useState(false)\n\n    const [basket, setBasket] = useState([])\n    const [displayedBasket, setDisplayedBasket] = useState([])\n    const [totalAmount, setTotalAmount] = useState(0)\n\n    let basketTotalAmount = 0\n    //Définition des styles MaterialUI\n    const useStyles = makeStyles((theme) => ({\n        margin:{\n            margin: theme.spacing(1),\n        },\n        addToBasket:{\n            marginTop: theme.spacing(2),\n            width:\"3em\"\n        },\n        categories:{\n            width:\"100%\"\n        },\n        filterButton:{\n            margin:theme.spacing(1)\n        }\n        }));\n        \n    const classes = useStyles();\n\n\n    //A chargement de la page\n    useEffect(() => {\n        //Chargement des produits dans le redux depuis la BDD s'il est vide\n        if(props.products.list.length===0){\n            getProducts()\n            .then(productsDB => {\n                props.loadProducts(productsDB)\n                setProducts(productsDB)\n            })\n        } else {\n            setProducts(props.products.list)\n        }\n        \n        getAllProductCat()\n        .then(categoriesDB => {\n            setCategories(categoriesDB)\n            /*if(categoriesDB) {\n                categoriesDB.map((category) => {\n                    setFilters(filters => [...filters, {name:category.label, id: category.id, isChecked: false}])\n                })\n            }*/\n            \n        })\n\n        setBasket(getBasket())\n        loadDisplayedBasket()\n    }, [])\n\n    //Au click sur les checkboxes, on inverse la valeur checked\n    const handleCheck = (e) => {\n        filters[filters.findIndex(checkbox => checkbox.name === e.target.name)].isChecked = !filters[filters.findIndex(checkbox => checkbox.name === e.target.name)].isChecked\n        setDataRefreshNeeded(true)\n    } \n\n    //Filtrage des résultats\n    const filterProducts = () => {\n        if(dataRefreshNeeded){\n            let datas = {}\n            if(userSearchValue){\n                datas = {user_search_value: userSearchValue}\n                \n            } else {\n                let selectedCategories = []\n                filters.map(filter => {\n                    if(filter.isChecked){\n                        selectedCategories.push(filter.id)\n                    }\n                })\n                datas = {categories : selectedCategories}\n            }\n            \n            getProducts(datas)\n                .then(productsDB => {\n                    props.loadProducts(productsDB)\n                    setProducts(productsDB)\n                    setDataRefreshNeeded(false)\n                })\n        }\n        \n    }\n\n    const resetFilters = () => {\n        filters.map((filter) => {\n            filter.value = false\n        })\n        setUserSearchValue(\"\")\n    }\n\n    const getCheckboxValue = (checkboxName) => {\n        /*if(filters[filters.findIndex(checkbox => checkbox.name === checkboxName)] !== undefined){\n            return filters[filters.findIndex(checkbox => checkbox.name === checkboxName)]\n        }*/\n        if(filters.filter(checkbox => { return checkbox.name === checkboxName})[0] !== undefined){\n            return filters.filter(checkbox => { return checkbox.name === checkboxName})[0].isChecked\n        }\n        \n    }\n\n    //Chargement du panier à afficher\n    const loadDisplayedBasket = () => {\n        \n        setDisplayedBasket([])\n        for(let i = 0; i < basket.length; i ++){\n            console.log(\"i=\", i)\n            getOneProduct(basket[i].productId)\n            .then((product) => {\n                let productAmount = (basket[i].quantity * product.price/1000).toFixed(2)\n                \n                setTotalAmount(totalAmount => totalAmount + parseFloat(productAmount))\n                setDisplayedBasket(displayedBasket => [...displayedBasket,\n                    <article className=\"aside-basket-item\" key={i}>\n                        <section className=\"aside-basket-item-pict\">\n                            <img src={config.product_pict_url + product.pict_url} alt={\"illustration\"+product.id} />\n                        </section>\n                        <section className=\"aside-basket-item-infos\">\n                            <Link className=\"general-link\" to={\"/shop/products/\"+basketItem.id}><p><span>{product.name}</span></p></Link>\n                            <section>\n                                <p>{basketItem.quantity} g</p>\n                                <p><span>{productAmount} €</span></p>\n                            </section>\n                        </section>\n                    </article>])\n            })\n            {basket.map((basketItem, index) => {\n                let product = getOneProduct(basketItem.id)\n                let productAmount = (basketItem.quantity * product.price/1000).toFixed(2)\n                basketTotalAmount += parseFloat(productAmount)\n\n                \n                return (\n                <article className=\"aside-basket-item\" key={index}>\n                    <section className=\"aside-basket-item-pict\">\n                        <img src={config.product_pict_url + product.pict_url} alt={\"illustration\"+product.id} />\n                    </section>\n                    <section className=\"aside-basket-item-infos\">\n                        <Link className=\"general-link\" to={\"/shop/products/\"+basketItem.id}><p><span>{product.name}</span></p></Link>\n                        <section>\n                            <p>{basketItem.quantity} g</p>\n                            <p><span>{productAmount} €</span></p>\n                        </section>\n                    </section>\n                </article>)\n            })}\n        }\n    }\n\n    //Fonction d'affichage du panier\n    const showDisplayedBasket = () => {\n\n        return (<section className=\"aside-basket\">\n                        <section className=\"aside-basket-header\">\n                            <p>Panier</p>\n                        </section>\n                        <section className=\"aside-basket-content\">\n                            {displayedBasket}\n                        </section>\n                        <section className=\"aside-basket-footer\">\n                            <p className=\"aside-basket-total-amount\">Total : <span>{basketTotalAmount.toFixed(2)} €</span></p>\n                            <Button variant=\"contained\" color=\"primary\" component={Link} to=\"/shop/basket\">Voir mon panier</Button>\n                        </section>\n                    </section>)\n    }\n\n    return(\n        <section className=\"root\">\n            <Header />\n            <HeaderPages headerTitle={headerTitle} headerBreadcrumbs={headerBreadcrumbs}/>\n            <section className=\"shop-container\">\n                \n\n                {/** Boutique */}\n                <section className=\"shop-content-container\">\n                    <section className=\"shop-content-header\">\n                        <p>{products && products.length + \" résultat(s)\"}</p>\n                    </section>\n                    <section className=\"shop-content\">\n                        \n                        {products &&  products.map((product, index) => {\n                            return(\n                                <article key={index} className=\"shop-content-item\">\n                                    <section className=\"shop-content-item-infos-container\">\n                                        <section className=\"shop-content-item-pict\">\n                                            <img src={config.product_pict_url + product.pict_url} alt={\"illustration\"+index}/>\n                                        </section>\n                                        <section className=\"shop-content-item-infos-text\">\n                                            <article>\n                                                <p className=\"shop-content-item-category\">{product.category}</p>\n                                                <p className=\"shop-content-item-name\">{product.name}</p>\n                                            </article>\n                                            \n                                            <p className=\"shop-content-item-desc\">{product.description}</p>\n                                            <p className=\"shop-content-item-price\">{product.price} €/Kg</p>\n                                            <Button color=\"primary\" variant=\"contained\" className={classes.addToBasket} component={Link} to={\"/shop/products/\"+product.id}><AddShoppingCartIcon /></Button>\n                                        </section>\n                                    </section>\n                                    \n                                </article>\n                            )\n                        })}\n                    </section>\n                </section>\n\n                <aside className=\"shop-aside\">\n                    <section className=\"aside-searchbox\">\n                        <FormControl className=\"searchbox-formcontrol\">\n                            <TextField type=\"search\"\n                                        variant=\"filled\" \n                                        className={classes.margin}\n                                        label=\"Rechercher un produit\"\n                                        InputLabelProps={{style : {color : \"#B4B4B4\"}}}\n                                        InputProps={{style : {color : \"#12455A\"}}} \n                                        value={userSearchValue}\n                                        onChange={(e) => {setUserSearchValue(e.target.value)\n                                                          setDataRefreshNeeded(true)}}\n                                        InputProps={{\n                                            startAdornment: (\n                                                <InputAdornment position=\"start\">\n                                                <SearchIcon />\n                                                </InputAdornment>\n                                            ),\n                                            }}/>\n                        </FormControl>\n                        \n                    </section>\n\n                    {/**Catégories de produits */}\n                    <section className=\"aside-categories\">\n                        <section className=\"aside-categories-header\">\n                            <p>Catégories</p>\n                        </section>\n                        <section className=\"aside-categories-content\">\n                            <FormGroup className={classes.categories}>\n                                {categories && categories.map((category, index) => {\n                                    return(<FormControlLabel \n                                        control={<Checkbox name={category.label} color=\"primary\" onChange={(e) => {handleCheck(e)}}/>}\n                                        label={category.label}\n                                        key={category.id}\n                                    />)\n                                })}\n                                \n                            </FormGroup>\n                            {<Button color=\"primary\" className={classes.filterButton} onClick={(e) => {\n                                resetFilters()\n                                filterProducts()}}>Réinitialiser les filtres</Button>}\n                            <Button variant=\"contained\" color=\"primary\" className={classes.filterButton} onClick={(e) => {filterProducts()}}>Filtrer</Button>\n                        </section>\n                    </section>\n\n                    {/** Panier*/}\n                    {/*basket && \n                    <section className=\"aside-basket\">\n                        <section className=\"aside-basket-header\">\n                            <p>Panier</p>\n                        </section>\n                        <section className=\"aside-basket-content\">\n                            {basket.map((basketItem, index) => {\n                                let product = getOneProduct(basketItem.id)\n                                let productAmount = (basketItem.quantity * product.price/1000).toFixed(2)\n                                basketTotalAmount += parseFloat(productAmount)\n\n                                \n                                return (\n                                <article className=\"aside-basket-item\" key={index}>\n                                    <section className=\"aside-basket-item-pict\">\n                                        <img src={config.product_pict_url + product.pict_url} alt={\"illustration\"+product.id} />\n                                    </section>\n                                    <section className=\"aside-basket-item-infos\">\n                                        <Link className=\"general-link\" to={\"/shop/products/\"+basketItem.id}><p><span>{product.name}</span></p></Link>\n                                        <section>\n                                            <p>{basketItem.quantity} g</p>\n                                            <p><span>{productAmount} €</span></p>\n                                        </section>\n                                    </section>\n                                </article>)\n                            })}\n                            \n                        </section>\n                        <section className=\"aside-basket-footer\">\n                            <p className=\"aside-basket-total-amount\">Total : <span>{basketTotalAmount.toFixed(2)} €</span></p>\n                            <Button variant=\"contained\" color=\"primary\" component={Link} to=\"/shop/basket\">Voir mon panier</Button>\n                        </section>\n                        </section>*/}\n                    {basket && showDisplayedBasket()}\n\n                </aside>\n            </section>\n            <Footer />\n        </section>\n    )\n}\n\nconst mapStateToProps = (store) => {\n    return {\n        products: store.products\n    }\n}\n\nconst mapDispatchToProps = {\n    loadProducts\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop)"]},"metadata":{},"sourceType":"module"}